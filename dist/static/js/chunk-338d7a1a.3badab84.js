(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-338d7a1a"],{"3aab":function(e,t,a){"use strict";a("48a3")},"48a3":function(e,t,a){},"7ebf":function(e,t,a){},8194:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"f",(function(){return o})),a.d(t,"g",(function(){return n})),a.d(t,"i",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"c",(function(){return u})),a.d(t,"j",(function(){return p})),a.d(t,"d",(function(){return b}));var s=a("4360"),c=a("751a");function r(){return Object(c["a"])({url:"/info_screen/member/list",method:"get",headers:{token:s["a"].getters.token}})}function o(e){return Object(c["a"])({url:"/info_screen/member/list/"+e,method:"get",headers:{token:s["a"].getters.token}})}function n(e){return Object(c["a"])({url:"/info_screen/member/insert",method:"post",data:e,headers:{token:s["a"].getters.token}})}function i(e){return Object(c["a"])({url:"/info_screen/member/statu/update/"+e,method:"get",headers:{token:s["a"].getters.token}})}function l(e){return Object(c["a"])({url:"/info_screen/member/batchAdd",method:"post",data:e,headers:{token:s["a"].getters.token}})}function d(e,t){return Object(c["a"])({url:"/info_screen/member/statu/batchUpdate/"+e,method:"post",data:t,headers:{token:s["a"].getters.token}})}function m(e){return Object(c["a"])({url:"/info_screen/member/update",method:"put",data:e,headers:{token:s["a"].getters.token}})}function u(e){return Object(c["a"])({url:"/info_screen/member/delete/"+e,method:"delete",headers:{token:s["a"].getters.token}})}function p(e,t){return Object(c["a"])({url:"/info_screen/member/team/"+e,method:"post",data:t,headers:{token:s["a"].getters.token}})}function b(e){return Object(c["a"])({url:"/info_screen/member/memberIds/"+e,method:"get",headers:{token:s["a"].getters.token}})}},d6c0:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"seeTeam-container",attrs:{id:"seeTeam"}},[a("div",{staticClass:"new-create"},[a("el-button",{staticClass:"create-button",attrs:{type:"success",size:"mini"},on:{click:function(t){return e.openDialog(1)}}},[a("i",{staticClass:"el-icon-plus"}),e._v(e._s(e.$t("clock.addMember")))])],1),a("div",{staticClass:"table",staticStyle:{padding:"10px"}},[a("el-table",{staticClass:"table-content",staticStyle:{width:"100%",margin:"0 auto"},attrs:{stripe:"",data:e.members,border:!0,height:e.innerHeight}},[a("el-table-column",{attrs:{align:"center",type:"index",label:e.$t("clock.index"),width:"60"}}),a("el-table-column",{attrs:{prop:"memberDept",label:e.$t("clock.department"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("el-input",{model:{value:e.updateForm.memberDept,callback:function(t){e.$set(e.updateForm,"memberDept",t)},expression:"updateForm.memberDept"}}):a("span",[e._v(e._s(t.row.memberDept))])]}}])}),a("el-table-column",{attrs:{prop:"memberName",label:e.$t("clock.name"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("el-input",{model:{value:e.updateForm.memberName,callback:function(t){e.$set(e.updateForm,"memberName",t)},expression:"updateForm.memberName"}}):a("span",[e._v(e._s(t.row.memberName))])]}}])}),a("el-table-column",{attrs:{prop:"avatar",label:e.$t("clock.avatar"),width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("div",[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.base_api+"/info_screen/member/avatar/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.updateForm.avatar?a("img",{staticClass:"avatar",staticStyle:{"border-radius":"50%",width:"50px",height:"50px"},attrs:{src:e.base_api+e.updateForm.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{"font-size":"20px",padding:"20px"}})])],1):a("div",[null==t.row.avatar?a("el-avatar",{staticClass:"avatar",attrs:{size:42,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}):a("el-avatar",{staticClass:"avatar",attrs:{size:42,src:e.base_api+t.row.avatar}})],1)]}}])}),a("el-table-column",{attrs:{prop:"memberEmail",label:e.$t("clock.email"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("el-input",{model:{value:e.updateForm.memberEmail,callback:function(t){e.$set(e.updateForm,"memberEmail",t)},expression:"updateForm.memberEmail"}}):a("span",[e._v(e._s(t.row.memberEmail))])]}}])}),a("el-table-column",{attrs:{prop:"duty",label:e.$t("clock.duty"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("el-input",{model:{value:e.updateForm.duty,callback:function(t){e.$set(e.updateForm,"duty",t)},expression:"updateForm.duty"}}):a("span",[e._v(e._s(t.row.duty))])]}}])}),a("el-table-column",{attrs:{prop:"statu",label:e.$t("clock.state"),width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.changeStatus(t.row.id)}},model:{value:t.row.statu,callback:function(a){e.$set(t.row,"statu",a)},expression:"scope.row.statu"}})]}}])}),a("el-table-column",{attrs:{label:e.$t("clock.operation"),align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("div",{staticStyle:{display:"flex","justify-content":"center",cursor:"pointer"}},[a("div",{staticStyle:{color:"#409eff"},on:{click:e.confirmUpdate}},[a("span",[e._v(e._s(e.$t("clock.confirm")))])]),a("div",{staticStyle:{color:"#409eff","margin-left":"10px"},on:{click:e.cancelUpdate}},[a("span",[e._v(e._s(e.$t("clock.cancel")))])])]):e._e(),t.row.id!=e.currentUpdateId?a("div",{staticStyle:{display:"flex","justify-content":"center",cursor:"pointer"}},[a("div",{staticStyle:{color:"#409eff"},on:{click:function(a){return e.update(t.row)}}},[a("span",[e._v(e._s(e.$t("clock.update")))])]),a("div",{staticStyle:{color:"#409eff","margin-left":"10px"},on:{click:function(a){return e.deleteMember(t.row.id)}}},[a("i",{staticClass:"el-icon-delete"}),a("span",[e._v(e._s(e.$t("clock.delete")))])])]):e._e()]}}])})],1)],1),e.tableVisable?a("div",{staticClass:"table"},[a("el-card",{staticClass:"table-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("excel data")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"primary"},on:{click:e.submitToBatch}},[e._v("confirm batch add")])],1),a("el-table",{staticClass:"table-content",staticStyle:{width:"60%",margin:"0 auto"},attrs:{data:e.excelData,border:"true"}},[a("el-table-column",{attrs:{prop:"memberDept",label:"dept",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"memberName",label:"name",width:"130",align:"center"}}),a("el-table-column",{attrs:{prop:"avatar",label:"avatar",width:"130",align:"center"}}),a("el-table-column",{attrs:{prop:"memberEmail",label:"email",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"duty",label:"duty",align:"center"}})],1)],1)],1):e._e(),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"75%","append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("chooseList",{attrs:{clockId:e.clockId},on:{fatherMethod:e.closeChooseList}})],1)],1)},c=[],r=a("8194"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chooseList",staticStyle:{display:"block"}},[a("el-checkbox-group",{model:{value:e.memberIds,callback:function(t){e.memberIds=t},expression:"memberIds"}},e._l(e.members,(function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[a("div",{staticStyle:{"text-align":"center"}},[null===t.avatar?a("el-avatar",{staticClass:"avatar",attrs:{size:43,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}):e._e(),null!==t.avatar?a("el-avatar",{staticClass:"avatar",attrs:{size:43,src:e.base_api+t.avatar}}):e._e(),a("div",{staticStyle:{"font-size":"0.9rem","font-weight":"bold"}},[e._v(e._s(t.memberName))])],1)])})),1),a("div",{staticStyle:{"text-align":"center",margin:"20px"}},[a("el-button",{staticClass:"create-button",attrs:{type:"primary",size:"mini"},on:{click:e.updateTeam}},[e._v(e._s(e.$t("clock.confirm")))]),a("el-button",{staticClass:"create-button",attrs:{type:"warning",size:"mini"},on:{click:e.cancle}},[e._v(e._s(e.$t("clock.cancel")))])],1)],1)},n=[],i={components:{},name:"chooseList",props:{clockId:{type:Number,default:1}},data(){return{base_api:"https://api.board.ifi-cloud.com",members:[],memberIds:[]}},computed:{},watch:{},methods:{cancle(){this.$emit("fatherMethod",!1),this.$message({type:"info",message:this.$t("clock.operationOK")}),this.getMemberIds(this.clockId)},async getMembers(){const{data:e}=await Object(r["e"])();200==e.code?this.members=e.data:this.$message({type:"warning",message:e.msg})},async getMemberIds(e){const{data:t}=await Object(r["d"])(e);200==t.code?this.memberIds=t.data:this.$message({type:"warning",message:t.msg})},async updateTeam(){const{data:e}=await Object(r["j"])(this.clockId,this.memberIds);200==e.code?(this.memberIds=e.data,console.log("关闭子组件"),this.$emit("fatherMethod",!0),this.$message({type:"success",message:this.$t("clock.operationOK")})):this.$message({type:"warning",message:e.msg})}},created(){this.getMembers(),this.getMemberIds(this.clockId)},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},l=i,d=(a("3aab"),a("2877")),m=Object(d["a"])(l,o,n,!1,null,"410ec991",null),u=m.exports,p=a("4360"),b={components:{chooseList:u},name:"teamComponent",props:{clockId:{type:Number,default:1}},data(){return{members:[],form:{},headers:{token:p["a"].getters.token},tableVisable:!1,excelData:[],updateForm:{},currentUpdateId:0,base_api:"https://api.board.ifi-cloud.com",innerHeight:500,dialogTitle:this.$t("clock.memberList"),dialogVisible:!1}},created(){this.getHeight(),this.getMembers()},methods:{openDialog(e){1===e&&(this.dialogTitle=this.$t("clock.memberList"),this.dialogVisible=!0)},closeChooseList(e){this.dialogVisible=!1,e&&this.getMembers()},getHeight(){let e=document.documentElement.clientHeight;this.innerHeight=Math.round(.75*e)},async getMembers(){const{data:e}=await Object(r["f"])(this.clockId);console.log(e.data),200==e.code&&(this.members=e.data)},handleSuccess(e){200==e.code&&(this.tableVisable=!0,this.excelData=e.data)},async submit(){console.log("submit"),this.form.clockId=this.clockId;const{data:e}=await Object(r["g"])(this.form);200==e.code&&(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.form={}),this.getMembers()},async changeStatus(e){const{data:t}=await Object(r["i"])(e);200==t.code&&(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getMembers())},async submitToBatch(){console.log(this.excelData);const{data:e}=await Object(r["a"])(this.excelData);200==e.code&&this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getMembers()},update(e){console.log(e),this.currentUpdateId=e.id,this.updateForm=e},async deleteMember(e){this.$confirm(this.$t("clock.deleteMember"),this.$t("clock.tooltip"),{confirmButtonText:this.$t("clock.buttonOk"),cancelButtonText:this.$t("clock.buttonCancel"),type:"warning"}).then(async()=>{const{data:t}=await Object(r["c"])(e);200==t.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getMembers()):this.$message({type:"warning",message:this.$t("clock.operationError")})}).catch(e=>{this.$message({type:"info",message:this.$t("clock.cancelTooltip")})})},cancelUpdate(){this.getMembers(),this.currentUpdateId=0,this.updateForm={},this.$message({type:"info",message:this.$t("clock.cancelTooltip")})},async confirmUpdate(){console.log(this.updateForm),console.log(this.clockId);const{data:e}=await Object(r["h"])(this.updateForm);200==e.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.currentUpdateId=0,this.updateForm={},this.getMembers()):this.$message({type:"error",message:this.$t("clock.operationError")})},handleAvatarSuccess(e){200==e.code?this.updateForm.avatar="\\"+e.data:this.$message({type:"warning",message:e.msg})}},mounted(){window.onresize=()=>(()=>{this.getHeight()})()}},h=b,g=(a("dc8a"),Object(d["a"])(h,s,c,!1,null,"47e7ddde",null));t["default"]=g.exports},dc8a:function(e,t,a){"use strict";a("7ebf")}}]);