(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df05522a","chunk-338d7a1a"],{"168c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clocks-contain",attrs:{id:"clocks"}},[a("pageHeader",{attrs:{title:e.$t("clock.title"),describe:e.$t("clock.desc")}}),a("div",{staticStyle:{"margin-left":"1rem"}},[a("el-form",{staticClass:"form-box",attrs:{inline:!0,model:e.form,size:"mini"}},[a("el-form-item",{attrs:{label:e.$t("clock.screen")}},[a("el-input",{attrs:{clearable:"",placeholder:e.$t("clock.screenPlaceholder"),"aria-autocomplete":"off"},model:{value:e.condition.screen,callback:function(t){e.$set(e.condition,"screen",t)},expression:"condition.screen"}})],1),a("el-form-item",{staticStyle:{"margin-right":"15px"},attrs:{label:e.$t("clock.area")}},[a("el-input",{attrs:{type:"text",clearable:"",placeholder:e.$t("clock.areaPlaceholder")},model:{value:e.condition.area,callback:function(t){e.$set(e.condition,"area",t)},expression:"condition.area"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.submitToQuery}},[e._v(e._s(e.$t("clock.query")))])],1),a("el-form-item",{staticStyle:{"margin-left":"5px"}},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.seeMembersList}},[e._v(e._s(e.$t("clock.seeAllMembers")))])],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.clocks,border:"","row-class-name":e.tableRowClassName,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"screen",label:e.$t("clock.screen"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1==t.row.screenId?"company":2==t.row.screenId?"marketing":"sts")+" ")]}}])}),a("el-table-column",{attrs:{prop:"clockArea",label:e.$t("clock.area"),align:"center"}}),a("el-table-column",{attrs:{prop:"clockTimezone",label:e.$t("clock.timezone"),align:"center"}}),a("el-table-column",{attrs:{prop:"timeFormat",label:e.$t("clock.timeFormat"),align:"center"}}),a("el-table-column",{attrs:{label:e.$t("clock.operation"),align:"center",width:"330"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex","justify-content":"center",cursor:"pointer"}},[a("div",{staticStyle:{color:"#409eff"},on:{click:function(a){return e.toSeeTeam(t.row.id)}}},[a("span",[e._v(e._s(e.$t("clock.see")))])]),a("div",{staticStyle:{color:"#409eff","margin-left":"10px"},on:{click:function(a){return e.toUpdate(t.row)}}},[a("span",[e._v(e._s(e.$t("clock.update")))])])])]}}])})],1),a("el-dialog",{attrs:{title:e.title,visible:e.updateFormVisible},on:{close:function(t){e.updateFormVisible=!1}}},[a("UpdateForm",{attrs:{form:e.updateForm},on:{fatherMethod:e.closeUpdateForm}})],1),a("el-dialog",{attrs:{title:e.$t("clock.updateTeam"),visible:e.teamVisible,width:"75%"},on:{"update:visible":function(t){e.teamVisible=t}}},[a("teamVue",{key:e.teamClockId,attrs:{clockId:e.teamClockId}})],1),a("el-drawer",{attrs:{title:e.$t("clock.teamInfo"),visible:e.drawer,direction:"rtl",size:"70%"},on:{"update:visible":function(t){e.drawer=t}}},[a("teamVue",{key:e.teamClockId,attrs:{clockId:e.teamClockId}})],1),a("el-dialog",{attrs:{title:e.$t("clock.memberList"),visible:e.membersVisible,width:"75%","destroy-on-close":!0},on:{"update:visible":function(t){e.membersVisible=t}}},[a("memberList")],1)],1)},r=[],o=(a("14d9"),a("751a")),i=a("4360");function c(e){return Object(o["a"])({url:"/info_screen/clock/list/"+e,method:"get",headers:{token:i["a"].getters.token}})}function l(e){return Object(o["a"])({url:"/info_screen/clock/all",method:"post",data:e,headers:{token:i["a"].getters.token}})}function n(e){return Object(o["a"])({url:"/info_screen/clock/update",method:"put",data:e,headers:{token:i["a"].getters.token}})}var d=a("8194"),m=a("d6c0"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"members-container"},[a("el-form",{ref:"formData",attrs:{model:e.formData,"label-width":"50",size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:e.$t("clock.department"),prop:"memberDept"}},[a("el-input",{attrs:{placeholder:e.$t("clock.depPlaceholder")},model:{value:e.formData.memberDept,callback:function(t){e.$set(e.formData,"memberDept",t)},expression:"formData.memberDept"}})],1),a("el-form-item",{attrs:{label:e.$t("clock.name"),prop:"memberName"}},[a("el-input",{attrs:{placeholder:e.$t("clock.namePlaceholder")},model:{value:e.formData.memberName,callback:function(t){e.$set(e.formData,"memberName",t)},expression:"formData.memberName"}})],1),a("el-form-item",{attrs:{label:e.$t("clock.email"),prop:"memberEmail"}},[a("el-input",{attrs:{placeholder:e.$t("clock.emailPlaceholder")},model:{value:e.formData.memberEmail,callback:function(t){e.$set(e.formData,"memberEmail",t)},expression:"formData.memberEmail"}})],1),a("el-form-item",{attrs:{label:e.$t("clock.duty"),prop:"duty"}},[a("el-input",{attrs:{placeholder:e.$t("clock.jobPlaceholder")},model:{value:e.formData.duty,callback:function(t){e.$set(e.formData,"duty",t)},expression:"formData.duty"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("formData")}}},[a("i",{staticClass:"el-icon-plus"}),e._v(e._s(e.$t("clock.add")))])],1),a("el-form-item",[a("el-upload",{ref:"uploadRef",staticClass:"upload-demo",attrs:{action:e.base_api+"/info_screen/member/excel/handler",multiple:"",limit:1,"on-success":e.handleSuccess,headers:e.headers,"before-upload":e.beforeUpload,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.clearVerify}},[a("i",{staticClass:"el-icon-upload2"}),e._v(e._s(e.$t("clock.upload")))])],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.clearVerify}},[a("i",{staticClass:"el-icon-download"}),a("a",{staticStyle:{margin:"0.3rem 0.5rem 0.3rem 0",color:"#fff"},attrs:{href:e.base_api+"/template/Team_Contact.xlsx"}},[e._v(e._s(e.$t("excelTemplate.downloadTemplate")))])])],1)],1),a("el-table",{staticClass:"table-content",staticStyle:{width:"100%",margin:"0 auto"},attrs:{stripe:"",data:e.members,border:!0,height:e.innerHeight}},[a("el-table-column",{attrs:{align:"center",type:"index",label:e.$t("clock.index"),width:"60"}}),a("el-table-column",{attrs:{prop:"memberDept",label:e.$t("clock.department"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("el-input",{model:{value:e.updateForm.memberDept,callback:function(t){e.$set(e.updateForm,"memberDept",t)},expression:"updateForm.memberDept"}}):a("span",[e._v(e._s(t.row.memberDept))])]}}])}),a("el-table-column",{attrs:{prop:"memberName",label:e.$t("clock.name"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("el-input",{model:{value:e.updateForm.memberName,callback:function(t){e.$set(e.updateForm,"memberName",t)},expression:"updateForm.memberName"}}):a("span",[e._v(e._s(t.row.memberName))])]}}])}),a("el-table-column",{attrs:{prop:"avatar",label:e.$t("clock.avatar"),width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("div",[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.base_api+"/info_screen/member/avatar/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.updateForm.avatar?a("img",{staticClass:"avatar",staticStyle:{"border-radius":"50%",width:"50px",height:"50px"},attrs:{src:e.base_api+e.updateForm.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{"font-size":"20px",padding:"20px"}})])],1):a("div",[null==t.row.avatar?a("el-avatar",{staticClass:"avatar",attrs:{size:42,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}):a("el-avatar",{staticClass:"avatar",attrs:{size:42,src:e.base_api+t.row.avatar}})],1)]}}])}),a("el-table-column",{attrs:{prop:"memberEmail",label:e.$t("clock.email"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("el-input",{model:{value:e.updateForm.memberEmail,callback:function(t){e.$set(e.updateForm,"memberEmail",t)},expression:"updateForm.memberEmail"}}):a("span",[e._v(e._s(t.row.memberEmail))])]}}])}),a("el-table-column",{attrs:{prop:"duty",label:e.$t("clock.duty"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("el-input",{model:{value:e.updateForm.duty,callback:function(t){e.$set(e.updateForm,"duty",t)},expression:"updateForm.duty"}}):a("span",[e._v(e._s(t.row.duty))])]}}])}),a("el-table-column",{attrs:{prop:"statu",label:e.$t("clock.state"),width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.changeStatus(t.row.id)}},model:{value:t.row.statu,callback:function(a){e.$set(t.row,"statu",a)},expression:"scope.row.statu"}})]}}])}),a("el-table-column",{attrs:{label:e.$t("clock.operation"),align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("div",{staticStyle:{display:"flex","justify-content":"center",cursor:"pointer"}},[a("div",{staticStyle:{color:"#409eff"},on:{click:e.confirmUpdate}},[a("span",[e._v(e._s(e.$t("clock.confirm")))])]),a("div",{staticStyle:{color:"#409eff","margin-left":"10px"},on:{click:e.cancelUpdate}},[a("span",[e._v(e._s(e.$t("clock.cancel")))])])]):e._e(),t.row.id!=e.currentUpdateId?a("div",{staticStyle:{display:"flex","justify-content":"center",cursor:"pointer"}},[a("div",{staticStyle:{color:"#409eff"},on:{click:function(a){return e.update(t.row)}}},[a("span",[e._v(e._s(e.$t("clock.update")))])]),a("div",{staticStyle:{color:"#409eff","margin-left":"10px"},on:{click:function(a){return e.deleteMember(t.row.id)}}},[a("span",[e._v(e._s(e.$t("clock.delete")))])])]):e._e()]}}])})],1),a("el-dialog",{attrs:{title:"excel parsing data",visible:e.tableVisable,width:"65%","append-to-body":!0},on:{"update:visible":function(t){e.tableVisable=t}}},[a("el-table",{staticClass:"table-content",staticStyle:{width:"50%",margin:"0 auto"},attrs:{data:e.excelData,border:!0,stripe:""}},[a("el-table-column",{attrs:{prop:"memberDept",label:"dept",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"memberName",label:"name",width:"130",align:"center"}}),a("el-table-column",{attrs:{prop:"memberEmail",label:"email",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"duty",label:"duty",align:"center"}})],1),a("div",{staticStyle:{"text-align":"center",margin:"20px 0"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitToBatch}},[e._v(" confirm ")]),a("el-button",{attrs:{type:"warning"},on:{click:e.cancle}},[e._v(" cancel ")])],1)],1)],1)},p=[],b={components:{},name:"membersList",data(){return{base_api:"https://api.board.ifi-cloud.com",members:[],updateForm:{},currentUpdateId:0,innerHeight:700,formData:{memberDept:"",memberName:"",memberEmail:"",duty:""},headers:{token:i["a"].getters.token},tableVisable:!1,excelData:[],rules:{memberDept:[{required:!0,message:this.$t("clock.depPlaceholder"),trigger:"blur"}],memberName:[{required:!0,message:this.$t("clock.namePlaceholder"),trigger:"blur"}]}}},computed:{},watch:{},methods:{async getMembers(){const{data:e}=await Object(d["e"])();200==e.code?this.members=e.data:this.$message({type:"warning",message:e.msg})},submit(e){this.$refs[e].validate(e=>{if(!e)return!1;Object(d["g"])(this.formData).then(e=>{if(200==e.data.code){this.$message({type:"success",message:this.$t("clock.operationOK")});for(let e in this.formData)this.formData[e]=""}})}),this.getMembers()},clearVerify(){this.$refs.formData.clearValidate()},handleSuccess(e){200==e.code?(this.tableVisable=!0,this.excelData=e.data,this.$refs.uploadRef.clearFiles()):this.$message({type:"warning",message:e.msg})},cancle(){this.tableVisable=!1,this.excelData=[],this.$refs.uploadRef.clearFiles()},async changeStatus(e){this.$refs.formData.clearValidate();const{data:t}=await Object(d["i"])(e);200==t.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getMembers()):this.$message({type:"warning",message:t.msg})},update(e){this.$refs.formData.clearValidate(),this.currentUpdateId=e.id,this.updateForm=e},async deleteMember(e){this.$refs.formData.clearValidate(),this.$confirm(this.$t("clock.deleteMember"),this.$t("award.tips"),{confirmButtonText:this.$t("award.confirm"),cancelButtonText:this.$t("award.cancel"),type:"warning"}).then(async()=>{const{data:t}=await Object(d["c"])(e);200==t.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getMembers()):this.$message({type:"warning",message:"delete member fail!"})}).catch(e=>{this.$message({type:"info",message:this.$t("clock.cancelTooltip")})})},cancelUpdate(){this.getMembers(),this.currentUpdateId=0,this.updateForm={},this.$message({type:"info",message:this.$t("clock.cancelTooltip")})},async confirmUpdate(){this.$refs.formData.clearValidate();const{data:e}=await Object(d["h"])(this.updateForm);200==e.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.currentUpdateId=0,this.updateForm={},this.getMembers()):this.$message({type:"error",message:this.$t("clock.operationError")})},handleAvatarSuccess(e){200==e.code?this.updateForm.avatar="\\"+e.data:this.$message({type:"warning",message:e.msg})},async submitToBatch(){const{data:e}=await Object(d["a"])(this.excelData);200==e.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.visible=!1,this.excelData=[],this.getMembers()):this.$message({type:"warning",message:this.$t("clock.operationError")})},beforeUpload(e){const t=e.name,a="Team_Contact.xlsx";if(t!==a)return this.$confirm("请上传Team_Contact.xlsx",this.$t("eol.tips"),{confirmButtonText:this.$t("eol.confirm"),cancelButtonText:this.$t("eol.cancel"),type:"warning"}),!1}},created(){this.getMembers()},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},f=b,h=(a("dc72"),a("2877")),g=Object(h["a"])(f,u,p,!1,null,"53ae1ab8",null),k=g.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"UpdateForm"},[a("el-form",{attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:e.$t("clock.screen")}},[a("span",{staticStyle:{"font-size":"2rem"}},[e._v(e._s(1==e.form.screenId?"company":2==e.form.screenId?"marketing":"sts"))])]),a("el-form-item",{attrs:{label:e.$t("clock.area")}},[a("el-input",{attrs:{type:"text",placeholder:e.$t("clock.areaPlaceholder")},model:{value:e.form.clockArea,callback:function(t){e.$set(e.form,"clockArea",t)},expression:"form.clockArea"}})],1),a("el-form-item",{attrs:{label:e.$t("clock.timezone")}},[a("el-input",{attrs:{type:"number",placeholder:e.$t("clock.timezonePlaceholder")},model:{value:e.form.clockTimezone,callback:function(t){e.$set(e.form,"clockTimezone",t)},expression:"form.clockTimezone"}})],1),a("el-form-item",{attrs:{label:e.$t("clock.timeFormat")}},[a("el-select",{attrs:{placeholder:e.$t("clock.timeFormatPlaceholder")},model:{value:e.form.timeFormat,callback:function(t){e.$set(e.form,"timeFormat",t)},expression:"form.timeFormat"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v(e._s(e.$t("clock.confirm")))])],1)],1)],1)},v=[],$={components:{},name:"UpdateForm",props:{form:{type:Object,required:!0,default:function(){return{}}}},data(){return{updateForm:this.form,options:[{value:12,label:12},{value:24,label:24}]}},computed:{},watch:{},methods:{async submit(){console.log(this.form);const{data:e}=await n(this.form);200==e.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.$emit("fatherMethod")):this.$message({type:"warning",message:e.msg})}},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},w=$,_=(a("48a4"),Object(h["a"])(w,y,v,!1,null,"17126703",null)),x=_.exports,S=a("e965"),F={name:"clockList",props:[],data(){return{clocks:[],tableDataCopy:{},conditionsFields:[],screenId:1,dialogVisible:!1,teamVisible:!1,currentClockId:1,currentMembers:[],data:[],value:[],firstValue:[],teamClockId:2,drawer:!1,condition:{area:"",screen:""},transferTitle:["隐藏列表","显示列表"],buttonTexts:["隐藏","显示"],form:{},transferDialogTitle:"",membersVisible:!1,updateFormVisible:!1,updateForm:{},title:""}},created(){},computed:{memberIdList(){const e=this.firstValue.concat(this.value).filter((e,t,a)=>t===a.indexOf(e)),t=this.firstValue.filter(e=>-1!=this.value.indexOf(e)),a=e.filter(e=>-1==t.indexOf(e));return console.log(a),a}},components:{teamVue:m["default"],memberList:k,UpdateForm:x,pageHeader:S["a"]},methods:{tableRowClassName(){return"warning-row1"},toSeeTeam(e){console.log(e),this.teamClockId=e,this.drawer=!0},async toUpdate(e){this.updateFormVisible=!0,this.updateForm=e},closeUpdateForm(){this.updateFormVisible=!1},async update(){console.log(this.memberIdList),console.log(this.currentClockId);const{data:e}=await Object(d["b"])(this.currentClockId,this.memberIdList);200==e.code?this.$message({type:"success",message:this.$t("clock.operationOK")}):this.$message({type:"warning",message:e.msg}),this.dialogVisible=!1},generateData(){this.data=[],this.value=[],this.firstValue=[],console.log(this.currentMembers.length);for(let e=0;e<this.currentMembers.length;e++)console.log(this.currentMembers[e]),this.data.push({key:this.currentMembers[e].memberId,label:this.currentMembers[e].memberName}),this.currentMembers[e].statu&&(this.value.push(this.currentMembers[e].memberId),this.firstValue.push(this.currentMembers[e].memberId))},tableFilter(e,t){let a=!0,s=this.tableDataCopy;t||(this.conditionsFields.forEach(t=>{t.fieldName===e.fieldName&&(t.conditions=e.conditions,a=!1)}),a&&this.conditionsFields.push(e)),this.conditionsFields.filter((e,t)=>{console.log(t),s=s.filter(t=>"text"===e.filterType&&""!==e.conditions.text?t[e.fieldName]&&t[e.fieldName].indexOf(e.conditions.text)>-1:"checkbox"===e.filterType&&0!==e.conditions.checkbox.length?e.conditions.checkbox.includes(t[e.fieldName]):"radio"===e.filterType&&""!==e.conditions.radio?null!==t[e.fieldName]&&t[e.fieldName].toString()===e.conditions.radio.toString():"date"===e.filterType&&(e.conditions.date1||e.conditions.date2)?e.conditions.date1?e.conditions.date2?t[e.fieldName]>=e.conditions.date1&&t[e.fieldName]<=e.conditions.date2:t[e.fieldName]>=e.conditions.date1:t[e.fieldName]<=e.conditions.date2:"number"===e.filterType&&(e.conditions.number1||e.conditions.number2)?e.conditions.number1?e.conditions.number2?t[e.fieldName]>=e.conditions.number1&&t[e.fieldName]<=e.conditions.number2:t[e.fieldName]>=e.conditions.number1:t[e.fieldName]<=e.conditions.number2:t)}),this.clocks=this.$set(this,"clocks",s)},async tableFilterReset(e){if(this.conditionsFields.forEach((t,a)=>{t.fieldName===e.fieldName&&this.conditionsFields.splice(a,1)}),0===this.conditionsFields.length){const{data:e}=await l();200==e.code&&(this.clocks=e.data)}else this.tableFilter(e,!0)},async submitToQuery(){const{data:e}=await l(this.condition);200==e.code&&(this.clocks=e.data),this.tableDataCopy=JSON.parse(JSON.stringify(this.clocks))},seeMembersList(){this.membersVisible=!0}},async mounted(){if(null!=this.$route.query.screenId){this.screenId=this.$route.query.screenId;const{data:e}=await c(this.screenId);console.log(e),200==e.code&&(this.clocks=e.data),this.tableDataCopy=JSON.parse(JSON.stringify(this.clocks))}else{const{data:e}=await l(this.condition);200==e.code&&(this.clocks=e.data),this.tableDataCopy=JSON.parse(JSON.stringify(this.clocks))}},watch:{}},I=F,C=(a("9f43"),Object(h["a"])(I,s,r,!1,null,"47072fec",null));t["default"]=C.exports},"1b35":function(e,t,a){},"3aab":function(e,t,a){"use strict";a("48a3")},"3e54":function(e,t,a){"use strict";a("9cc8")},"48a3":function(e,t,a){},"48a4":function(e,t,a){"use strict";a("d7bb")},"7ebf":function(e,t,a){},8194:function(e,t,a){"use strict";a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return i})),a.d(t,"g",(function(){return c})),a.d(t,"i",(function(){return l})),a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"c",(function(){return u})),a.d(t,"j",(function(){return p})),a.d(t,"d",(function(){return b}));var s=a("4360"),r=a("751a");function o(){return Object(r["a"])({url:"/info_screen/member/list",method:"get",headers:{token:s["a"].getters.token}})}function i(e){return Object(r["a"])({url:"/info_screen/member/list/"+e,method:"get",headers:{token:s["a"].getters.token}})}function c(e){return Object(r["a"])({url:"/info_screen/member/insert",method:"post",data:e,headers:{token:s["a"].getters.token}})}function l(e){return Object(r["a"])({url:"/info_screen/member/statu/update/"+e,method:"get",headers:{token:s["a"].getters.token}})}function n(e){return Object(r["a"])({url:"/info_screen/member/batchAdd",method:"post",data:e,headers:{token:s["a"].getters.token}})}function d(e,t){return Object(r["a"])({url:"/info_screen/member/statu/batchUpdate/"+e,method:"post",data:t,headers:{token:s["a"].getters.token}})}function m(e){return Object(r["a"])({url:"/info_screen/member/update",method:"put",data:e,headers:{token:s["a"].getters.token}})}function u(e){return Object(r["a"])({url:"/info_screen/member/delete/"+e,method:"delete",headers:{token:s["a"].getters.token}})}function p(e,t){return Object(r["a"])({url:"/info_screen/member/team/"+e,method:"post",data:t,headers:{token:s["a"].getters.token}})}function b(e){return Object(r["a"])({url:"/info_screen/member/memberIds/"+e,method:"get",headers:{token:s["a"].getters.token}})}},"9cc8":function(e,t,a){},"9f43":function(e,t,a){"use strict";a("c087")},c087:function(e,t,a){},d6c0:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"seeTeam-container",attrs:{id:"seeTeam"}},[a("div",{staticClass:"new-create"},[a("el-button",{staticClass:"create-button",attrs:{type:"success",size:"mini"},on:{click:function(t){return e.openDialog(1)}}},[a("i",{staticClass:"el-icon-plus"}),e._v(e._s(e.$t("clock.addMember")))])],1),a("div",{staticClass:"table",staticStyle:{padding:"10px"}},[a("el-table",{staticClass:"table-content",staticStyle:{width:"100%",margin:"0 auto"},attrs:{stripe:"",data:e.members,border:!0,height:e.innerHeight}},[a("el-table-column",{attrs:{align:"center",type:"index",label:e.$t("clock.index"),width:"60"}}),a("el-table-column",{attrs:{prop:"memberDept",label:e.$t("clock.department"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("el-input",{model:{value:e.updateForm.memberDept,callback:function(t){e.$set(e.updateForm,"memberDept",t)},expression:"updateForm.memberDept"}}):a("span",[e._v(e._s(t.row.memberDept))])]}}])}),a("el-table-column",{attrs:{prop:"memberName",label:e.$t("clock.name"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("el-input",{model:{value:e.updateForm.memberName,callback:function(t){e.$set(e.updateForm,"memberName",t)},expression:"updateForm.memberName"}}):a("span",[e._v(e._s(t.row.memberName))])]}}])}),a("el-table-column",{attrs:{prop:"avatar",label:e.$t("clock.avatar"),width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("div",[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.base_api+"/info_screen/member/avatar/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.updateForm.avatar?a("img",{staticClass:"avatar",staticStyle:{"border-radius":"50%",width:"50px",height:"50px"},attrs:{src:e.base_api+e.updateForm.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{"font-size":"20px",padding:"20px"}})])],1):a("div",[null==t.row.avatar?a("el-avatar",{staticClass:"avatar",attrs:{size:42,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}):a("el-avatar",{staticClass:"avatar",attrs:{size:42,src:e.base_api+t.row.avatar}})],1)]}}])}),a("el-table-column",{attrs:{prop:"memberEmail",label:e.$t("clock.email"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("el-input",{model:{value:e.updateForm.memberEmail,callback:function(t){e.$set(e.updateForm,"memberEmail",t)},expression:"updateForm.memberEmail"}}):a("span",[e._v(e._s(t.row.memberEmail))])]}}])}),a("el-table-column",{attrs:{prop:"duty",label:e.$t("clock.duty"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("el-input",{model:{value:e.updateForm.duty,callback:function(t){e.$set(e.updateForm,"duty",t)},expression:"updateForm.duty"}}):a("span",[e._v(e._s(t.row.duty))])]}}])}),a("el-table-column",{attrs:{prop:"statu",label:e.$t("clock.state"),width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.changeStatus(t.row.id)}},model:{value:t.row.statu,callback:function(a){e.$set(t.row,"statu",a)},expression:"scope.row.statu"}})]}}])}),a("el-table-column",{attrs:{label:e.$t("clock.operation"),align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.id==e.currentUpdateId?a("div",{staticStyle:{display:"flex","justify-content":"center",cursor:"pointer"}},[a("div",{staticStyle:{color:"#409eff"},on:{click:e.confirmUpdate}},[a("span",[e._v(e._s(e.$t("clock.confirm")))])]),a("div",{staticStyle:{color:"#409eff","margin-left":"10px"},on:{click:e.cancelUpdate}},[a("span",[e._v(e._s(e.$t("clock.cancel")))])])]):e._e(),t.row.id!=e.currentUpdateId?a("div",{staticStyle:{display:"flex","justify-content":"center",cursor:"pointer"}},[a("div",{staticStyle:{color:"#409eff"},on:{click:function(a){return e.update(t.row)}}},[a("span",[e._v(e._s(e.$t("clock.update")))])]),a("div",{staticStyle:{color:"#409eff","margin-left":"10px"},on:{click:function(a){return e.deleteMember(t.row.id)}}},[a("i",{staticClass:"el-icon-delete"}),a("span",[e._v(e._s(e.$t("clock.delete")))])])]):e._e()]}}])})],1)],1),e.tableVisable?a("div",{staticClass:"table"},[a("el-card",{staticClass:"table-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("excel data")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"primary"},on:{click:e.submitToBatch}},[e._v("confirm batch add")])],1),a("el-table",{staticClass:"table-content",staticStyle:{width:"60%",margin:"0 auto"},attrs:{data:e.excelData,border:"true"}},[a("el-table-column",{attrs:{prop:"memberDept",label:"dept",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"memberName",label:"name",width:"130",align:"center"}}),a("el-table-column",{attrs:{prop:"avatar",label:"avatar",width:"130",align:"center"}}),a("el-table-column",{attrs:{prop:"memberEmail",label:"email",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"duty",label:"duty",align:"center"}})],1)],1)],1):e._e(),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"75%","append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("chooseList",{attrs:{clockId:e.clockId},on:{fatherMethod:e.closeChooseList}})],1)],1)},r=[],o=a("8194"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chooseList",staticStyle:{display:"block"}},[a("el-checkbox-group",{model:{value:e.memberIds,callback:function(t){e.memberIds=t},expression:"memberIds"}},e._l(e.members,(function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[a("div",{staticStyle:{"text-align":"center"}},[null===t.avatar?a("el-avatar",{staticClass:"avatar",attrs:{size:43,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}):e._e(),null!==t.avatar?a("el-avatar",{staticClass:"avatar",attrs:{size:43,src:e.base_api+t.avatar}}):e._e(),a("div",{staticStyle:{"font-size":"0.9rem","font-weight":"bold"}},[e._v(e._s(t.memberName))])],1)])})),1),a("div",{staticStyle:{"text-align":"center",margin:"20px"}},[a("el-button",{staticClass:"create-button",attrs:{type:"primary",size:"mini"},on:{click:e.updateTeam}},[e._v(e._s(e.$t("clock.confirm")))]),a("el-button",{staticClass:"create-button",attrs:{type:"warning",size:"mini"},on:{click:e.cancle}},[e._v(e._s(e.$t("clock.cancel")))])],1)],1)},c=[],l={components:{},name:"chooseList",props:{clockId:{type:Number,default:1}},data(){return{base_api:"https://api.board.ifi-cloud.com",members:[],memberIds:[]}},computed:{},watch:{},methods:{cancle(){this.$emit("fatherMethod",!1),this.$message({type:"info",message:this.$t("clock.operationOK")}),this.getMemberIds(this.clockId)},async getMembers(){const{data:e}=await Object(o["e"])();200==e.code?this.members=e.data:this.$message({type:"warning",message:e.msg})},async getMemberIds(e){const{data:t}=await Object(o["d"])(e);200==t.code?this.memberIds=t.data:this.$message({type:"warning",message:t.msg})},async updateTeam(){const{data:e}=await Object(o["j"])(this.clockId,this.memberIds);200==e.code?(this.memberIds=e.data,console.log("关闭子组件"),this.$emit("fatherMethod",!0),this.$message({type:"success",message:this.$t("clock.operationOK")})):this.$message({type:"warning",message:e.msg})}},created(){this.getMembers(),this.getMemberIds(this.clockId)},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},n=l,d=(a("3aab"),a("2877")),m=Object(d["a"])(n,i,c,!1,null,"410ec991",null),u=m.exports,p=a("4360"),b={components:{chooseList:u},name:"teamComponent",props:{clockId:{type:Number,default:1}},data(){return{members:[],form:{},headers:{token:p["a"].getters.token},tableVisable:!1,excelData:[],updateForm:{},currentUpdateId:0,base_api:"https://api.board.ifi-cloud.com",innerHeight:500,dialogTitle:this.$t("clock.memberList"),dialogVisible:!1}},created(){this.getHeight(),this.getMembers()},methods:{openDialog(e){1===e&&(this.dialogTitle=this.$t("clock.memberList"),this.dialogVisible=!0)},closeChooseList(e){this.dialogVisible=!1,e&&this.getMembers()},getHeight(){let e=document.documentElement.clientHeight;this.innerHeight=Math.round(.75*e)},async getMembers(){const{data:e}=await Object(o["f"])(this.clockId);console.log(e.data),200==e.code&&(this.members=e.data)},handleSuccess(e){200==e.code&&(this.tableVisable=!0,this.excelData=e.data)},async submit(){console.log("submit"),this.form.clockId=this.clockId;const{data:e}=await Object(o["g"])(this.form);200==e.code&&(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.form={}),this.getMembers()},async changeStatus(e){const{data:t}=await Object(o["i"])(e);200==t.code&&(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getMembers())},async submitToBatch(){console.log(this.excelData);const{data:e}=await Object(o["a"])(this.excelData);200==e.code&&this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getMembers()},update(e){console.log(e),this.currentUpdateId=e.id,this.updateForm=e},async deleteMember(e){this.$confirm(this.$t("clock.deleteMember"),this.$t("clock.tooltip"),{confirmButtonText:this.$t("clock.buttonOk"),cancelButtonText:this.$t("clock.buttonCancel"),type:"warning"}).then(async()=>{const{data:t}=await Object(o["c"])(e);200==t.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getMembers()):this.$message({type:"warning",message:this.$t("clock.operationError")})}).catch(e=>{this.$message({type:"info",message:this.$t("clock.cancelTooltip")})})},cancelUpdate(){this.getMembers(),this.currentUpdateId=0,this.updateForm={},this.$message({type:"info",message:this.$t("clock.cancelTooltip")})},async confirmUpdate(){console.log(this.updateForm),console.log(this.clockId);const{data:e}=await Object(o["h"])(this.updateForm);200==e.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.currentUpdateId=0,this.updateForm={},this.getMembers()):this.$message({type:"error",message:this.$t("clock.operationError")})},handleAvatarSuccess(e){200==e.code?this.updateForm.avatar="\\"+e.data:this.$message({type:"warning",message:e.msg})}},mounted(){window.onresize=()=>(()=>{this.getHeight()})()}},f=b,h=(a("dc8a"),Object(d["a"])(f,s,r,!1,null,"47e7ddde",null));t["default"]=h.exports},d7bb:function(e,t,a){},dc72:function(e,t,a){"use strict";a("1b35")},dc8a:function(e,t,a){"use strict";a("7ebf")},e965:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",staticStyle:{background:"#fff",height:"100px",padding:"10px 0"}},[a("div",{staticClass:"title",staticStyle:{"font-size":"30px",padding:"10px"}},[e._v(e._s(e.title))]),a("div",{staticClass:"content",staticStyle:{"font-size":"15px",padding:"10px",color:"#888"}},[e._v(e._s(e.describe)+" ")])])},r=[],o={components:{},name:"pageHeader",props:{title:{type:String,default:null},describe:{type:String,default:null}},data(){return{}},computed:{},watch:{},methods:{},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},i=o,c=(a("3e54"),a("2877")),l=Object(c["a"])(i,s,r,!1,null,"32773f74",null);t["a"]=l.exports}}]);