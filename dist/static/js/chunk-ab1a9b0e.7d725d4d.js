(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ab1a9b0e"],{"3e54":function(e,t,a){"use strict";a("9cc8")},"643f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"department-container"},[a("pageHeader",{attrs:{title:"部门财务管理",describe:"这个模块管理公司各部门财务情况，包括部门费用预算和部门费用月度趋势，仅支持以下两个表格的excel导入。点击以下按钮查看看板效果。"}}),a("div",{staticClass:"new-create",staticStyle:{"margin-left":"1rem"}},[a("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(t){return e.toPath("/info_screen/fdata/screen/cost")}}},[e._v("查看看板")]),a("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning",size:"mini"},on:{click:function(t){return e.copyUrl()}}},[e._v("复制看板地址")])],1),a("el-divider"),a("div",{staticClass:"first-row"},[a("div",{staticStyle:{"font-size":"20px","border-bottom":"1px solid #e6ebf5",padding:"1rem"}},[e._v(" 部门费用预算汇总 ")]),a("div",{staticClass:"new-create",staticStyle:{padding:"1rem"}},[a("el-upload",{attrs:{action:e.base_api+"/info_screen/fdDeptAll/excel/handler",multiple:"",limit:1,"on-success":e.handleSuccess1,headers:e.headers,"before-upload":e.beforeUpload1}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[a("i",{staticClass:"el-icon-upload2"}),e._v("Excel上传")])],1),a("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",size:"mini"}},[a("i",{staticClass:"el-icon-download"}),a("a",{staticStyle:{margin:"0.3rem 0.5rem 0.3rem 0",color:"#fff"},attrs:{href:e.base_api+"/template/Department_Expense_Budget.xlsx"}},[e._v(e._s(e.$t("excelTemplate.downloadTemplate")))])])],1),a("div",{staticStyle:{padding:"0 1rem 1rem 1rem"}},[a("el-table",{staticClass:"table1",attrs:{data:e.listDeptAll,stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{align:"center",label:"部门/Department",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+"/"+e._s(t.row.enName)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"费用/Expense",prop:"cost"}}),a("el-table-column",{attrs:{align:"center",label:"目标/Forecast",prop:"budget"}}),a("el-table-column",{attrs:{align:"center",label:"差异率/Difference",prop:"rate"}})],1)],1)]),a("div",{staticClass:"second-row"},[a("div",{staticStyle:{"font-size":"20px","border-bottom":"1px solid #e6ebf5",padding:"1rem"}},[e._v(" 部门费用月度趋势 ")]),a("div",{staticClass:"new-create",staticStyle:{padding:"1rem"}},[a("el-upload",{attrs:{action:e.base_api+"/info_screen/fdDeptMonth/excel/handler",multiple:"",limit:1,"on-success":e.handleSuccess2,headers:e.headers,"before-upload":e.beforeUpload2}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[a("i",{staticClass:"el-icon-upload2"}),e._v("Excel上传")])],1),a("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",size:"mini"}},[a("i",{staticClass:"el-icon-download"}),a("a",{staticStyle:{margin:"0.3rem 0.5rem 0.3rem 0",color:"#fff"},attrs:{href:e.base_api+"/template/Monthly_Department_Expense.xlsx"}},[e._v(e._s(e.$t("excelTemplate.downloadTemplate")))])])],1),a("div",{staticStyle:{padding:"0 1rem 1rem 1rem"}},[a("el-table",{staticClass:"table2",attrs:{data:e.listDeptMonth,stripe:""}},[a("el-table-column",{attrs:{align:"center",label:"费用/Expense",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+"/"+e._s(t.row.enName)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"Jan.",prop:"value1"}}),a("el-table-column",{attrs:{align:"center",label:"Feb.",prop:"value2"}}),a("el-table-column",{attrs:{align:"center",label:"Mar.",prop:"value3"}}),a("el-table-column",{attrs:{align:"center",label:"Apr.",prop:"value4"}}),a("el-table-column",{attrs:{align:"center",label:"May.",prop:"value5"}}),a("el-table-column",{attrs:{align:"center",label:"Jun.",prop:"value6"}}),a("el-table-column",{attrs:{align:"center",label:"Jul.",prop:"value7"}}),a("el-table-column",{attrs:{align:"center",label:"Aug.",prop:"value8"}}),a("el-table-column",{attrs:{align:"center",label:"Sep.",prop:"value9"}}),a("el-table-column",{attrs:{align:"center",label:"Oct.",prop:"value10"}}),a("el-table-column",{attrs:{align:"center",label:"Nov.",prop:"value11"}}),a("el-table-column",{attrs:{align:"center",label:"Dec.",prop:"value12"}})],1)],1)]),a("el-dialog",{attrs:{title:e.dialog1.title,visible:e.dialog1.visible},on:{"update:visible":function(t){return e.$set(e.dialog1,"visible",t)}}},[a("el-table",{staticClass:"table1",attrs:{data:e.deptAll,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号/Index"}}),a("el-table-column",{attrs:{align:"center",label:"部门/Department",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+"/"+e._s(t.row.enName)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"费用/Expense",prop:"cost"}}),a("el-table-column",{attrs:{align:"center",label:"目标/Forecast",prop:"budget"}}),a("el-table-column",{attrs:{align:"center",label:"差异率/Difference",prop:"rate"}})],1),a("el-button",{staticStyle:{display:"block",margin:"10px auto"},attrs:{type:"primary"},on:{click:e.submitDeptAll}},[e._v("保存")])],1),a("el-dialog",{attrs:{title:e.dialog2.title,visible:e.dialog2.visible},on:{"update:visible":function(t){return e.$set(e.dialog2,"visible",t)}}},[a("el-table",{staticClass:"table2",attrs:{data:e.deptMonth,border:"",stripe:""}},[a("el-table-column",{attrs:{align:"center",label:"费用/Expense",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+"/"+e._s(t.row.enName)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"Jan.",prop:"value1"}}),a("el-table-column",{attrs:{align:"center",label:"Feb.",prop:"value2"}}),a("el-table-column",{attrs:{align:"center",label:"Mar.",prop:"value3"}}),a("el-table-column",{attrs:{align:"center",label:"Apr.",prop:"value4"}}),a("el-table-column",{attrs:{align:"center",label:"May.",prop:"value5"}}),a("el-table-column",{attrs:{align:"center",label:"Jun.",prop:"value6"}}),a("el-table-column",{attrs:{align:"center",label:"Jul.",prop:"value7"}}),a("el-table-column",{attrs:{align:"center",label:"Aug.",prop:"value8"}}),a("el-table-column",{attrs:{align:"center",label:"Sep.",prop:"value9"}}),a("el-table-column",{attrs:{align:"center",label:"Oct.",prop:"value10"}}),a("el-table-column",{attrs:{align:"center",label:"Nov.",prop:"value11"}}),a("el-table-column",{attrs:{align:"center",label:"Dec.",prop:"value12"}})],1),a("el-button",{staticStyle:{display:"block",margin:"10px auto"},attrs:{type:"primary"},on:{click:e.submitDeptMonth}},[e._v("保存")])],1)],1)},l=[],r=(a("14d9"),a("e965")),o=a("4360"),s=a("cd05"),i={components:{pageHeader:r["a"]},name:"department-data",data(){return{base_api:"https://api.board.ifi-cloud.com",headers:{token:o["a"].getters.token},deptAll:[],deptMonth:[],listDeptAll:[],listDeptMonth:[],dialog1:{title:"部门费用总表",visible:!1},dialog2:{title:"部门费用月趋势表",visible:!1}}},computed:{},watch:{},methods:{toPath(e){"——"!=e&&this.$router.push({path:e})},handleSuccess1(e){200==e.code&&(console.log(e.data),this.deptAll=e.data,this.dialog1.visible=!0)},handleSuccess2(e){200==e.code&&(console.log(e.data),this.deptMonth=e.data,this.dialog2.visible=!0)},formatRate(e,t,a){return(100*a).toFixed(0)+"%"},async submitDeptAll(){const{data:e}=await Object(s["l"])(this.deptAll);200==e.code&&(this.dialog1.visible=!1,this.getListDeptAll())},async getListDeptAll(){const{data:e}=await Object(s["d"])();console.log(e.data),200==e.code&&(this.listDeptAll=e.data)},async submitDeptMonth(){const{data:e}=await Object(s["m"])(this.deptMonth);200==e.code&&(this.dialog2.visible=!1,this.getListDeptMonth())},async getListDeptMonth(){const{data:e}=await Object(s["e"])();console.log(e.data),200==e.code&&(this.listDeptMonth=e.data)},copyUrl(){var e=window.location.host+"/#/info_screen/screen/finance/cost",t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),this.$message({type:"success",message:"看板地址复制成功"}),document.body.removeChild(t)},beforeUpload1(e){console.log(e.name);const t=e.name,a="Department_Expense_Budget.xlsx";if(t!==a)return this.$confirm("请上传Department_Expense_Budget.xlsx",this.$t("eol.tips"),{confirmButtonText:this.$t("eol.confirm"),cancelButtonText:this.$t("eol.cancel"),type:"warning"}),!1},beforeUpload2(e){console.log(e.name);const t=e.name,a="Monthly_Department_Expense.xlsx";if(t!==a)return this.$confirm("请上传Monthly_Department_Expense.xlsx",this.$t("eol.tips"),{confirmButtonText:this.$t("eol.confirm"),cancelButtonText:this.$t("eol.cancel"),type:"warning"}),!1}},created(){},mounted(){this.getListDeptAll(),this.getListDeptMonth()},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},c=i,d=(a("e5d5"),a("2877")),u=Object(d["a"])(c,n,l,!1,null,"53612e1a",null);t["default"]=u.exports},"803e":function(e,t,a){},"9cc8":function(e,t,a){},cd05:function(e,t,a){"use strict";a.d(t,"k",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"p",(function(){return s})),a.d(t,"h",(function(){return i})),a.d(t,"o",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"l",(function(){return u})),a.d(t,"d",(function(){return p})),a.d(t,"m",(function(){return b})),a.d(t,"e",(function(){return m})),a.d(t,"i",(function(){return f})),a.d(t,"a",(function(){return g})),a.d(t,"n",(function(){return h})),a.d(t,"f",(function(){return v})),a.d(t,"j",(function(){return _})),a.d(t,"b",(function(){return y}));var n=a("751a"),l=a("4360");function r(e){return Object(n["a"])({url:"/info_screen/fdAll/saveBatch",data:e,method:"post",headers:{token:l["a"].getters.token}})}function o(){return Object(n["a"])({url:"/info_screen/fdAll/list",method:"get",headers:{token:l["a"].getters.token}})}function s(e){return Object(n["a"])({url:"/info_screen/fdSaleStatus/saveBatch",data:e,method:"post",headers:{token:l["a"].getters.token}})}function i(){return Object(n["a"])({url:"/info_screen/fdSaleStatus/list",method:"get",headers:{token:l["a"].getters.token}})}function c(e){return Object(n["a"])({url:"/info_screen/fdSaleMonth/saveBatch",data:e,method:"post",headers:{token:l["a"].getters.token}})}function d(){return Object(n["a"])({url:"/info_screen/fdSaleMonth/list",method:"get",headers:{token:l["a"].getters.token}})}function u(e){return Object(n["a"])({url:"/info_screen/fdDeptAll/saveBatch",data:e,method:"post",headers:{token:l["a"].getters.token}})}function p(){return Object(n["a"])({url:"/info_screen/fdDeptAll/list",method:"get",headers:{token:l["a"].getters.token}})}function b(e){return Object(n["a"])({url:"/info_screen/fdDeptMonth/saveBatch",data:e,method:"post",headers:{token:l["a"].getters.token}})}function m(){return Object(n["a"])({url:"/info_screen/fdDeptMonth/list",method:"get",headers:{token:l["a"].getters.token}})}function f(e){return Object(n["a"])({url:"/info_screen/fdBalance/saveBatch",data:e,method:"post",headers:{token:l["a"].getters.token}})}function g(){return Object(n["a"])({url:"/info_screen/fdBalance/list",method:"get",headers:{token:l["a"].getters.token}})}function h(e){return Object(n["a"])({url:"/info_screen/fdPurchase/saveBatch",data:e,method:"post",headers:{token:l["a"].getters.token}})}function v(){return Object(n["a"])({url:"/info_screen/fdPurchase/list",method:"get",headers:{token:l["a"].getters.token}})}function _(e){return Object(n["a"])({url:"/info_screen/fdCash/saveBatch",data:e,method:"post",headers:{token:l["a"].getters.token}})}function y(){return Object(n["a"])({url:"/info_screen/fdCash/list",method:"get",headers:{token:l["a"].getters.token}})}},e5d5:function(e,t,a){"use strict";a("803e")},e965:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",staticStyle:{background:"#fff",height:"100px",padding:"10px 0"}},[a("div",{staticClass:"title",staticStyle:{"font-size":"30px",padding:"10px"}},[e._v(e._s(e.title))]),a("div",{staticClass:"content",staticStyle:{"font-size":"15px",padding:"10px",color:"#888"}},[e._v(e._s(e.describe)+" ")])])},l=[],r={components:{},name:"pageHeader",props:{title:{type:String,default:null},describe:{type:String,default:null}},data(){return{}},computed:{},watch:{},methods:{},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},o=r,s=(a("3e54"),a("2877")),i=Object(s["a"])(o,n,l,!1,null,"32773f74",null);t["a"]=i.exports}}]);