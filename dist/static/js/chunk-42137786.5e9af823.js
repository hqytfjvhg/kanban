(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42137786"],{1261:function(e,t,c){"use strict";c.d(t,"c",(function(){return d})),c.d(t,"d",(function(){return a})),c.d(t,"f",(function(){return o})),c.d(t,"a",(function(){return h})),c.d(t,"e",(function(){return l})),c.d(t,"g",(function(){return r})),c.d(t,"b",(function(){return u}));var s=c("cee4");console.log("https://api.board.ifi-cloud.com","地址");const i=s["a"].create({baseURL:"https://api.board.ifi-cloud.com/vote",timeout:1e4});i.interceptors.request.use(e=>e,e=>Promise.reject(e)),i.interceptors.response.use(e=>{const t=e.data;return t},e=>Promise.reject(e));var n=i;function d(){return n({url:"/getVotingScore",method:"get"})}function a(){return n({url:"/reset",method:"get"})}function o(e){return n({url:"/setTeamId",method:"post",data:e})}function h(){return n({url:"/getStoId",method:"get"})}function l(e){return n({url:"/setState",method:"post",data:e})}function r(e){return n({url:"/voting",method:"post",data:e})}function u(){return n({url:"/getTeamId",method:"get"})}},"2b75":function(e,t,c){"use strict";c("baad")},"9fc9":function(e,t,c){e.exports=c.p+"static/img/actLogo.4fc9d083.png"},baad:function(e,t,c){},dc3f:function(e,t,c){"use strict";c.r(t);var s=function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("div",{staticClass:"container",style:e.height},[e._m(0),c("div",{staticClass:"ticket-bottom"},[c("div",{staticStyle:{width:"93%","border-radius":"2px","padding-top":"20px"}},[c("div",{staticClass:"ticket-box"},[c("div",{staticClass:"ticket-content"},[c("div",{staticClass:"ticket-item"},[c("img",{attrs:{src:"https://linyi-oss.oss-cn-shenzhen.aliyuncs.com/1.jpg",alt:""},on:{click:function(t){return e.changeOne(1)}}}),c("el-checkbox",{attrs:{disabled:e.checkeds[0].disabled},on:{change:function(t){return e.handleCheckAllChange(1)}},model:{value:e.checkeds[0].checked,callback:function(t){e.$set(e.checkeds[0],"checked",t)},expression:"checkeds[0].checked"}},[e._v("不再犹豫")])],1),c("div",{staticClass:"ticket-item"},[c("img",{attrs:{src:"https://linyi-oss.oss-cn-shenzhen.aliyuncs.com/2.jpg",alt:""},on:{click:function(t){return e.changeOne(2)}}}),c("el-checkbox",{attrs:{disabled:e.checkeds[1].disabled},on:{change:function(t){return e.handleCheckAllChange(2)}},model:{value:e.checkeds[1].checked,callback:function(t){e.$set(e.checkeds[1],"checked",t)},expression:"checkeds[1].checked"}},[e._v("手扶拖拉机斯基很酷")])],1)]),c("div",{staticClass:"ticket-content"},[c("div",{staticClass:"ticket-item"},[c("img",{attrs:{src:"https://linyi-oss.oss-cn-shenzhen.aliyuncs.com/3.jpg",alt:""},on:{click:function(t){return e.changeOne(3)}}}),c("el-checkbox",{attrs:{disabled:e.checkeds[2].disabled},on:{change:function(t){return e.handleCheckAllChange(3)}},model:{value:e.checkeds[2].checked,callback:function(t){e.$set(e.checkeds[2],"checked",t)},expression:"checkeds[2].checked"}},[e._v("我爱上班")])],1),c("div",{staticClass:"ticket-item"},[c("img",{attrs:{src:"https://linyi-oss.oss-cn-shenzhen.aliyuncs.com/4.jpg",alt:""},on:{click:function(t){return e.changeOne(4)}}}),c("el-checkbox",{attrs:{disabled:e.checkeds[3].disabled},on:{change:function(t){return e.handleCheckAllChange(4)}},model:{value:e.checkeds[3].checked,callback:function(t){e.$set(e.checkeds[3],"checked",t)},expression:"checkeds[3].checked"}},[e._v("群英荟萃")])],1)]),c("div",{staticClass:"bottom-button"},[c("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:e.confirmResult}},[e._v("立即提交")])],1),c("div",{staticClass:"ticket-tip"},[e._v("必选2个节目才可提交")])])])])])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"top-box"},[s("div",{staticClass:"logo"},[s("img",{attrs:{src:c("9fc9"),alt:""}})]),s("div",{staticClass:"title"},[e._v("春茗节目评选")])])}],n=(c("14d9"),c("1261")),d={data(){return{active:1,disabled:!0,checkeds:[{checked:!1,disabled:!1},{checked:!1,disabled:!1},{checked:!1,disabled:!1},{checked:!1,disabled:!1},{checked:!1,disabled:!1}],count:0,height:0,stoId:null}},mounted(){console.log(2)},created(){document.title="春茗节目投票",this.height="height:"+(window.innerHeight+50)+"px",this.getUuid()},methods:{getUuid(){Object(n["a"])().then(e=>{this.stoId=e.data.stoId}),Object(n["b"])().then(e=>{if(200==e.code&&e.data){let t=JSON.parse(e.data),c=0;for(let e=0;e<5;e++)c+=t[e];switch(c){case 2:this.$router.push({path:"/act/votedv2/index2"});break;case 3:this.$router.push({path:"/act/votedv2/index3"});break;default:break}}})},changeOne(e){if(this.disabled||!this.checkeds[e-1].disabled){this.checkeds[e-1].checked=!this.checkeds[e-1].checked,this.count=0;for(let e=0;e<5;e++)this.checkeds[e].checked&&this.count++;if(this.count>=2){for(let e=0;e<5;e++)this.checkeds[e].checked||(this.checkeds[e].disabled=!0);this.disabled=!1}else{for(let e=0;e<5;e++)this.checkeds[e].disabled=!1;this.disabled=!0}}},handleCheckAllChange(e){this.count=0;for(let t=0;t<5;t++)this.checkeds[t].checked&&this.count++;if(console.log(this.count),this.count>=2){for(let e=0;e<5;e++)this.checkeds[e].checked||(this.checkeds[e].disabled=!0);this.disabled=!1}else{for(let e=0;e<5;e++)this.checkeds[e].disabled=!1;this.disabled=!0}},confirmResult(){var e=this;let t=localStorage.getItem(e.stoId);if(t)return void this.$message({type:"error",message:"每个用户每轮只能投一次，提交失败",iconClass:" ",customClass:"el-message--error"});let c=[this.checkeds[0].checked?1:0,this.checkeds[1].checked?1:0,this.checkeds[2].checked?1:0,this.checkeds[3].checked?1:0,this.checkeds[4].checked?1:0];Object(n["g"])(c).then(c=>{200==c.code?(t||localStorage.setItem(e.stoId,"fff"),this.$message({type:"success",message:"投票成功，感谢您的参与！",iconClass:" ",customClass:"el-message--success"})):this.$message({type:"error",message:c.respMsg,iconClass:" ",customClass:"el-message--error"})})}}},a=d,o=(c("2b75"),c("2877")),h=Object(o["a"])(a,s,i,!1,null,"f0f579d8",null);t["default"]=h.exports}}]);