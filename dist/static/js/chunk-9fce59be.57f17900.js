(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9fce59be"],{"125b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"show-container",attrs:{id:"index"}},[a("pageHeader",{attrs:{title:e.$t("ext.pageTitle"),describe:e.$t("ext.pageDesc")}}),a("div",{staticClass:"new-create",staticStyle:{"margin-left":"1rem"}},[a("el-button",{staticClass:"create-button",attrs:{type:"primary",size:"mini"},on:{click:e.openDialog}},[a("i",{staticClass:"el-icon-plus"}),e._v(e._s(e.$t("int.add")))]),a("el-button",{staticStyle:{"margin-left":"0"},attrs:{type:"warning",size:"mini"},on:{click:function(t){e.visible1=!0}}},[a("i",{staticClass:"el-icon-view"}),e._v(" "+e._s(e.$t("int.view"))+" ")])],1),a("div",{staticClass:"table"},[a("el-table",{staticClass:"table-content",staticStyle:{width:"100%"},attrs:{data:e.shows,border:!0,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:e.$t("project.index"),width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"title",label:e.$t("ext.title"),width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showId==e.currentUpdateId?a("el-input",{model:{value:e.updateShow.title,callback:function(t){e.$set(e.updateShow,"title",t)},expression:"updateShow.title"}}):a("div",[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{prop:"message",label:e.$t("ext.message"),width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showId==e.currentUpdateId?a("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.updateShow.message,callback:function(t){e.$set(e.updateShow,"message",t)},expression:"updateShow.message"}}):a("div",[e._v(e._s(t.row.message))])]}}])}),a("el-table-column",{attrs:{prop:"publisher",label:e.$t("ext.publisher"),width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.memberId||null===t.row.memberId?a("div",[t.row.showId==e.currentUpdateId?a("el-input",{model:{value:e.updateShow.publisher,callback:function(t){e.$set(e.updateShow,"publisher",t)},expression:"updateShow.publisher"}}):a("div",[a("div",[a("el-avatar",{staticClass:"avatar",attrs:{size:42,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),a("div",[e._v(e._s(t.row.publisher))])],1)])],1):a("div",[a("div",[a("el-avatar",{staticClass:"avatar",attrs:{size:42,src:e.base_api+t.row.avatar}}),a("div",[e._v(e._s(t.row.memberName))])],1)])]}}])}),a("el-table-column",{attrs:{prop:"gmtModified",label:e.$t("ext.lastModified"),width:"200",align:"center"}}),a("el-table-column",{attrs:{prop:"isExpire",label:e.$t("ext.state"),width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66"},on:{change:function(a){return e.updateIsExpire(t.row.showId)}},model:{value:t.row.isExpire,callback:function(a){e.$set(t.row,"isExpire",a)},expression:"scope.row.isExpire"}})]}}])}),a("el-table-column",{attrs:{prop:"expireTimeString",label:e.$t("ext.expiration"),width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showId==e.currentUpdateId?a("el-date-picker",{staticStyle:{width:"160px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"please select datetime"},model:{value:e.updateShow.expireTimeString,callback:function(t){e.$set(e.updateShow,"expireTimeString",t)},expression:"updateShow.expireTimeString"}}):a("span",[e._v(e._s(t.row.expireTimeString))])]}}])}),a("el-table-column",{attrs:{label:e.$t("ext.operation"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showId==e.currentUpdateId?a("div",{staticStyle:{display:"flex","justify-content":"center",cursor:"pointer"}},[a("div",{staticStyle:{color:"#409eff"},on:{click:e.confirmUpdate}},[a("span",[e._v(e._s(e.$t("ext.confirm")))])]),a("div",{staticStyle:{color:"#409eff","margin-left":"10px"},on:{click:e.cancelUpdate}},[a("span",[e._v(e._s(e.$t("ext.cancel")))])])]):a("div",{staticStyle:{display:"flex","justify-content":"center",cursor:"pointer"}},[a("div",{staticStyle:{color:"#409eff"},on:{click:function(a){return e.update(t.row)}}},[a("span",[e._v(e._s(e.$t("ext.update")))])]),a("div",{staticStyle:{color:"#409eff","margin-left":"10px"},on:{click:function(a){return e.deleteById(t.row.showId)}}},[a("span",[e._v(e._s(e.$t("ext.delete")))])])])]}}])})],1)],1),e.tableVisable?a("div",{staticClass:"table"},[a("el-card",{staticClass:"table-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("excel data")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"primary"},on:{click:e.submitToBatch}},[e._v("Confirm Batch Operations ")])],1),a("el-table",{staticClass:"table-content",staticStyle:{width:"70%",margin:"0 auto"},attrs:{data:e.excelData,border:"true"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"font-size":"28px",color:"blue","font-family":"'Times New Roman', Times, serif",padding:"20px 50px"}},[e._v(" content ")]),a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},e._l(t.row.content,(function(t,s){return a("el-form-item",{key:s,attrs:{label:s+":"}},[a("span",[e._v(e._s(t))])])})),1)]}}],null,!1,1419671540)}),a("el-table-column",{attrs:{prop:"title",label:"title",width:"330",align:"center"}}),a("el-table-column",{attrs:{prop:"expireTime",label:"expiration datetime",width:"220",align:"center"}}),a("el-table-column",{attrs:{prop:"gmtCreate",label:"create time",width:"220",align:"center"}}),a("el-table-column",{attrs:{prop:"gmtModified",label:"last modify",align:"center"}})],1)],1)],1):e._e(),a("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.visible,width:"35%","destroy-on-close":!0},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[a("el-form",{ref:"formData",attrs:{model:e.formData,"label-width":"150px",rules:e.rules}},[a("el-form-item",{attrs:{label:e.$t("ext.title"),prop:"title"}},[a("el-input",{attrs:{type:"text",placeholder:e.$t("ext.titlePlaceholder")},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),a("el-form-item",{attrs:{label:e.$t("ext.message"),prop:"message"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:e.$t("ext.messagePlaceholder")},model:{value:e.formData.message,callback:function(t){e.$set(e.formData,"message",t)},expression:"formData.message"}})],1),a("el-form-item",{attrs:{label:e.$t("ext.customPublisher")}},[a("el-switch",{model:{value:e.flag,callback:function(t){e.flag=t},expression:"flag"}}),a("span",{staticStyle:{color:"red","font-size":"0.8rem","margin-left":"0.2rem"}},[e._v(e._s(e.$t("ext.notes")))])],1),e.flag?a("el-form-item",{attrs:{label:e.$t("ext.customPublisher"),prop:"publisher"}},[a("el-input",{attrs:{placeholder:e.$t("ext.customPublisher")},model:{value:e.formData.publisher,callback:function(t){e.$set(e.formData,"publisher",t)},expression:"formData.publisher"}})],1):a("el-form-item",{attrs:{label:e.$t("ext.optionalPublisher"),prop:"member"}},[a("el-select",{attrs:{placeholder:e.$t("ext.optionalPublisher")},model:{value:e.formData.memberId,callback:function(t){e.$set(e.formData,"memberId",t)},expression:"formData.memberId"}},e._l(e.members,(function(t){return a("el-option",{key:t.id,attrs:{label:t.memberName,value:t.id}},[a("div",[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"15px"}},[e._v(e._s(t.memberName))]),a("el-avatar",{staticStyle:{width:"35px",height:"35px",float:"right"},attrs:{src:e.base_api+t.avatar}})],1)])})),1)],1),a("el-form-item",{attrs:{label:e.$t("ext.expiration"),prop:"expireTimeString"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:e.$t("ext.expirationPlaceholder"),"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.formData.expireTimeString,callback:function(t){e.$set(e.formData,"expireTimeString",t)},expression:"formData.expireTimeString"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialog.visible=!1}}},[e._v(e._s(e.$t("int.cancel")))]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.submit("formData")}}},[e._v(e._s(e.$t("ext.confirm")))])],1)])],1)],1),a("el-dialog",{attrs:{title:"Ext. News",visible:e.visible1,width:"35%","destroy-on-close":!0},on:{"update:visible":function(t){e.visible1=t}}},[a("ExtNews",{attrs:{extNews:e.extNews}})],1)],1)},i=[],r=a("821b"),n=a("f9d2"),o=a("a4d8"),l=a("4360"),c=a("e965"),d={name:"show-index",data(){return{base_api:"https://api.board.ifi-cloud.com",shows:[],formData:{title:"",message:"",memberId:"",expireTime:null,publisher:"",expireTimeString:""},excelData:[],tableVisable:!1,headers:{token:l["a"].getters.token},updateShow:{},currentUpdateId:0,dialog:{title:this.$t("ext.addDialogTitle"),visible:!1},members:[],flag:!0,visible1:!1}},created(){},computed:{rules(){return{title:[{required:!0,message:this.$t("int.titlePlaceholder"),trigger:"blur"}],message:[{required:!0,message:this.$t("int.messagePlaceholder"),trigger:"blur"}],expireTime:[{required:!0,message:this.$t("int.expirationPlaceholder"),trigger:"blur"}]}}},components:{pageHeader:c["a"],ExtNews:n["a"]},methods:{openDialog(){this.dialog.title=this.$t("ext.addDialogTitle"),this.dialog.visible=!this.dialog.visible;for(let e in this.formData)this.formData[e]=""},async getShows(){const{data:e}=await Object(r["c"])();200==e.code?this.shows=e.data:this.$message({type:"warning",message:e.msg})},submit(e){this.$refs[e].validate(e=>{if(this.formData.expireTime=null,!e)return!1;Object(r["d"])(this.formData).then(e=>{if(200==e.data.code){this.$message({type:"success",message:this.$t("clock.operationOK")});for(let e in this.formData)this.formData[e]="";this.dialog.visible=!1,this.getShows()}})})},handleSuccess(e){console.log("get excelTable"),200==e.code?(this.excelData=e.data,this.tableVisable=!0):this.$message({type:"warning",message:e.msg})},async submitToBatch(){console.log(this.excelData),console.log(this.excelData);const{data:e}=await Object(r["a"])(this.excelData);200==e.code?this.$message({type:"success",message:"batch successfully!"}):this.$message({type:"warning",message:e.msg})},deleteById(e){this.$confirm(this.$t("ext.deleteTips"),this.$t("ext.tips"),{confirmButtonText:this.$t("ext.confirm"),cancelButtonText:this.$t("ext.cancel"),type:"warning"}).then(async()=>{const{data:t}=await Object(r["b"])(e);200==t.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getShows()):this.$message({type:"warning",message:t.msg})}).catch(e=>{})},async updateIsExpire(e){const{data:t}=await Object(r["f"])(e);200==t.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getShows(),this.getExtNews()):this.$message({type:"warning",message:t.msg})},async updateShow1(){this.updateShow.expireTime=null;const{data:e}=await Object(r["g"])(this.updateShow);200==e.code?(this.$message({type:"success",message:"update notice successfully!"}),this.getShows(),this.getExtNews(),this.currentUpdateId=0,this.updateShow={}):this.$message({type:"warning",message:e.msg})},update(e){this.currentUpdateId=e.showId,this.updateShow=e},confirmUpdate(){this.updateShow1()},cancelUpdate(){this.currentUpdateId=0,this.updateShow={},this.getShows()},async getMembers(){const{data:e}=await Object(o["e"])();200==e.code?this.members=e.data:this.$message({type:"warning",message:e.msg})},async getExtNews(){const{data:e}=await Object(r["e"])();200==e.code?this.extNews=e.data:this.$message({type:"warning",message:e.msg})}},mounted(){this.getShows(),this.getMembers(),this.getExtNews()},watch:{}},u=d,p=(a("3316"),a("2877")),m=Object(p["a"])(u,s,i,!1,null,"72f878c8",null);t["default"]=m.exports},"1e5c":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outer",style:{height:e.height},on:{mouseover:e.stopScroll,mouseleave:e.startScroll}},[a("div",{ref:"inner1"},[e._t("default")],2),a("div",{ref:"inner2"})])},i=[],r={name:"AutoScroll",props:{speed:{type:Number,default:90},height:{type:String,default:"0px"}},mounted(){this.getDomRef(),this.tryScroll()},updated(){this.tryScroll()},methods:{getDomRef(){this.outer=this.$el,this.inner1=this.$refs.inner1,this.inner2=this.$refs.inner2},tryScroll(){this.inner1.clientHeight>this.outer.clientHeight?(this.inner2.innerHTML=this.inner1.innerHTML,this.startScroll()):(this.inner2.innerHTML="",this.stopScroll())},startScroll(){this.autoScrollInterval||(this.autoScrollInterval=setInterval(()=>{this.outer.scrollTop>=this.inner1.offsetHeight?(this.outer.scrollTop=0,this.$emit("complete")):(this.outer.scrollTop+=1,this.outer.scrollTop===Math.ceil(this.inner1.offsetHeight/2)&&this.$emit("half"))},this.speed))},stopScroll(){clearInterval(this.autoScrollInterval),this.autoScrollInterval=null}}},n=r,o=(a("5b51"),a("2877")),l=Object(o["a"])(n,s,i,!1,null,"614ad447",null),c=l.exports;t["a"]=c},2205:function(e,t,a){},"2a00":function(e,t,a){},3316:function(e,t,a){"use strict";a("d297")},"364e":function(e,t,a){"use strict";a("2205")},"3e54":function(e,t,a){"use strict";a("9cc8")},"5b51":function(e,t,a){"use strict";a("2a00")},"821b":function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"b",(function(){return u}));var s=a("751a"),i=a("4360");function r(){return Object(s["a"])({url:"/info_screen/show/list",method:"get",headers:{token:i["a"].getters.token}})}function n(e){return Object(s["a"])({url:"/info_screen/show/insert",method:"post",data:e,headers:{token:i["a"].getters.token}})}function o(e){return Object(s["a"])({url:"/info_screen/show/batchAdd",method:"post",data:e,headers:{token:i["a"].getters.token}})}function l(){return Object(s["a"])({url:"/info_screen/show/unexpiredShow",method:"get"})}function c(e){return Object(s["a"])({url:"/info_screen/show/updateIsExpire/"+e,method:"get",headers:{token:i["a"].getters.token}})}function d(e){return Object(s["a"])({url:"/info_screen/show/updateShow",method:"post",data:e,headers:{token:i["a"].getters.token}})}function u(e){return Object(s["a"])({url:"/info_screen/show/delete/"+e,method:"delete",headers:{token:i["a"].getters.token}})}},"9cc8":function(e,t,a){},a4d8:function(e,t,a){"use strict";a.d(t,"g",(function(){return i})),a.d(t,"h",(function(){return r})),a.d(t,"i",(function(){return n})),a.d(t,"e",(function(){return o})),a.d(t,"j",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"f",(function(){return d})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return m})),a.d(t,"k",(function(){return h})),a.d(t,"l",(function(){return f})),a.d(t,"m",(function(){return g}));var s=a("751a");function i(e){return Object(s["a"])({url:"/info_screen/dd/key",data:e,method:"post"})}function r(e){return Object(s["a"])({url:"/info_screen/dd/show",data:e,method:"post"})}function n(e){return Object(s["a"])({url:"/info_screen/dd/urgent",data:e,method:"post"})}function o(){return Object(s["a"])({url:"/info_screen/dd/members",method:"get"})}function l(){return Object(s["a"])({url:"/info_screen/dd/show/list",method:"get"})}function c(){return Object(s["a"])({url:"/info_screen/dd/key/list",method:"get"})}function d(){return Object(s["a"])({url:"/info_screen/dd/notice/list",method:"get"})}function u(e){return Object(s["a"])({url:"/info_screen/dd/show/delete/"+e,method:"delete"})}function p(e){return Object(s["a"])({url:"/info_screen/dd/notice/delete/"+e,method:"delete"})}function m(e){return Object(s["a"])({url:"/info_screen/dd/key/delete/"+e,method:"delete"})}function h(e){return Object(s["a"])({url:"/info_screen/dd/key",method:"put",data:e})}function f(e){return Object(s["a"])({url:"/info_screen/dd/show",method:"put",data:e})}function g(e){return Object(s["a"])({url:"/info_screen/dd/urgent",method:"put",data:e})}},d297:function(e,t,a){},e965:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",staticStyle:{background:"#fff",height:"100px",padding:"10px 0"}},[a("div",{staticClass:"title",staticStyle:{"font-size":"30px",padding:"10px"}},[e._v(e._s(e.title))]),a("div",{staticClass:"content",staticStyle:{"font-size":"15px",padding:"10px",color:"#888"}},[e._v(e._s(e.describe)+" ")])])},i=[],r={components:{},name:"pageHeader",props:{title:{type:String,default:null},describe:{type:String,default:null}},data(){return{}},computed:{},watch:{},methods:{},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},n=r,o=(a("3e54"),a("2877")),l=Object(o["a"])(n,s,i,!1,null,"32773f74",null);t["a"]=l.exports},f9d2:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ExtNew"},[a("div",{staticClass:"key-news"},[a("div",{staticClass:"news-box"},[a("div",{staticClass:"news-tip"},[e._v("Ext. News")]),a("autoscroll",{attrs:{height:e.height,speed:30}},[0===e.extNews.length?a("div",{staticStyle:{padding:"5rem","font-size":"3rem"}},[e._v(" None Ext. News ")]):e._e(),e._l(e.extNews,(function(t){return a("div",{key:t.showId,staticClass:"news-content"},[a("el-row",{staticClass:"news-item"},[a("el-col",{staticStyle:{"margin-right":"1rem"},attrs:{span:4}},[0===t.memberId||null===t.memberId?a("div",{staticClass:"news-publish-box"},[a("el-avatar",{staticStyle:{width:"5rem",height:"5rem"},attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),a("div",{staticStyle:{"font-size":"1rem","margin-top":"6px",color:"rgba(255, 255, 255,0.8)","word-break":"break-all","font-weight":"600"}},[e._v(" "+e._s(t.publisher))])],1):a("div",{staticClass:"news-publish-box"},[a("el-avatar",{staticStyle:{width:"5rem",height:"5rem"},attrs:{src:e.base_api+t.avatar}}),a("div",{staticStyle:{"font-size":"1rem","margin-top":"6px",color:"rgba(255, 255, 255,0.8)","word-break":"break-all","font-weight":"600"}},[e._v(" "+e._s(t.memberName))])],1)]),a("el-col",{attrs:{span:20}},[a("div",{staticStyle:{"line-height":"1.5em","word-break":"keep-all","text-align":"justify","text-justify":"distribute-all-lines","font-size":"1.4rem","font-weight":"600"}},[e._v(" "+e._s(t.message))]),a("div",{staticStyle:{"font-size":"1rem","margin-top":"10px",color:"rgba(255, 255, 255,0.5)","text-align":"end"}},[e._v(" "+e._s(t.gmtCreate))]),a("div",{staticStyle:{"font-size":"1rem","margin-top":"3px",color:"rgba(255, 255, 255,0.5)","text-align":"end"}},[e._v(" "+e._s(t.title))])])],1)],1)}))],2)],1)])])},i=[],r=a("821b"),n=a("1e5c"),o={components:{autoscroll:n["a"]},name:"ExtNews",props:{height:{type:String,default:"15.5rem"},rem:{type:String,default:""},extNews:{type:Array,default:function(){return[]}}},data(){return{data:[],base_api:"https://api.board.ifi-cloud.com"}},computed:{},watch:{rem:{handler:function(){document.documentElement.style.fontSize=this.rem,console.log("CardComponent change document rem"+this.rem)},immediate:!0}},methods:{async getShows(){const{data:e}=await Object(r["e"])();200==e.code&&(this.data=e.data)}},created(){},mounted(){this.getShows()},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},l=o,c=(a("364e"),a("2877")),d=Object(c["a"])(l,s,i,!1,null,"1977e2d6",null);t["a"]=d.exports}}]);