(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bdbd928"],{"39e2":function(t,e,a){},"3e54":function(t,e,a){"use strict";a("9cc8")},"4a53":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"calendar",style:{height:t.height}},[a("div",{staticClass:"calendar-tip",staticStyle:{color:"#eee"}},[t._v("Holidays")]),a("div",{staticClass:"calendar-content"},[a("vc-calendar",{staticClass:"vc-calendar",staticStyle:{"margin-right":"0.5rem"},style:t.cssVars,attrs:{color:"blue",pane:1,attributes:t.holidays,"is-dark":!0,locale:"en"}}),a("vc-calendar",{ref:"calendar",staticClass:"vc-calendar",staticStyle:{"margin-top":"1rem"},style:t.cssVars,attrs:{color:"blue",pane:2,attributes:t.holidays,"is-dark":!0,locale:"en",step:2}})],1),t._m(0)])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center",height:"3rem","font-family":"Arial","padding-bottom":"0.6rem"}},[a("div",{staticClass:"work-style"}),a("div",{staticStyle:{color:"#ea4335","margin-right":"1rem"}},[t._v("CN working day")]),a("div",{staticClass:"holiday-tip",staticStyle:{background:"#f2ff00"}}),a("div",{staticStyle:{color:"#f2ff00","margin-right":"1rem"}},[t._v("CN")]),a("div",{staticClass:"holiday-tip",staticStyle:{background:"#4285f4"}}),a("div",{staticStyle:{color:"#4285f4","margin-right":"1rem"}},[t._v("UK")]),a("div",{staticClass:"holiday-tip",staticStyle:{background:"#b5b5b5"}}),a("div",{staticStyle:{color:"#b5b5b5","margin-right":"1rem"}},[t._v("US")]),a("div",{staticClass:"holiday-tip",staticStyle:{background:"#34a853"}}),a("div",{staticStyle:{color:"#34a853"}},[t._v("Today")])])}],n={components:{},name:"NationalHoliday",props:{rem:{type:String,default:""},holidays:{type:Array,default:function(){return[]}},height:{type:String,default:"100%"},contentHeight:{type:String,default:"30px"}},data(){return{testData:[{key:"today",dates:new Date,highlight:{color:"red"}},{dot:{style:{backgroundColor:"#48bb78"}},dates:[new Date(2024,8,1),new Date(2024,8,2),new Date(2024,8,3),new Date(2024,8,4)]}]}},computed:{cssVars(){return{"--contentHeight":this.contentHeight}}},watch:{rem:{handler:function(){document.documentElement.style.fontSize=this.rem},immediate:!0}},methods:{checkAndConvertDotsToTriangles(){if(this.holidays){const t=document.querySelectorAll(".vc-dot");t.forEach(t=>{const e=window.getComputedStyle(t),a=e.getPropertyValue("background-color");"rgb(83, 83, 83)"===a?(t.classList.add("triangle-dot"),t.style.backgroundColor="transparent"):t.classList.remove("triangle-dot")})}}},created(){},async mounted(){const t=this.$refs.calendar;await t.move(1)},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},s=n,l=(a("796d"),a("2877")),r=Object(l["a"])(s,i,o,!1,null,"20fa56ae",null);e["a"]=r.exports},"796d":function(t,e,a){"use strict";a("39e2")},"83bc":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"calendar-container",staticStyle:{"padding-bottom":"50px"},attrs:{id:"calendar"}},[a("pageHeader",{attrs:{title:t.$t("vacation.pageTitle"),describe:t.$t("vacation.pageDesc")}}),a("el-button",{staticStyle:{position:"absolute",bottom:"5rem",right:"6rem","z-index":"99",width:"3rem",height:"3rem"},attrs:{type:"warning",circle:""},on:{click:function(e){t.visible1=!0}}}),a("el-calendar",{staticClass:"calendar",scopedSlots:t._u([{key:"dateCell",fn:function(e){e.date;var i=e.data;return[a("div",{on:{click:function(e){return e.stopPropagation(),t.handleBianJi(i.day)}}},[a("p",{class:t.rqi.indexOf(i.day)>-1?"is-selected":""},[t._v(" "+t._s(i.day.split("-").slice(1).join("-"))+" "),t.rqi.indexOf(i.day)>-1?t._l(t.rqineirong[i.day],(function(e,i){return a("div",{key:i,staticStyle:{display:"flex",margin:"0.3rem"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("vacation.clickDelete"),placement:"top-start"}},["China"===e.area?a("div",{staticClass:"holiday-tip",staticStyle:{background:"#f2ff00"},on:{click:function(a){return a.stopPropagation(),t.deleteConnection(e)}}}):t._e(),"green"===e.color?a("div",{staticClass:"holiday-tip",staticStyle:{background:"#4285f4"},on:{click:function(a){return a.stopPropagation(),t.deleteConnection(e)}}}):t._e(),"blue"===e.color?a("div",{staticClass:"holiday-tip",staticStyle:{background:"#b5b5b5"},on:{click:function(a){return a.stopPropagation(),t.deleteConnection(e)}}}):t._e(),"yellow"===e.color?a("div",{staticClass:"holiday-tip",staticStyle:{background:"#ecc94b"},on:{click:function(a){return a.stopPropagation(),t.deleteConnection(e)}}}):t._e(),"CN working day"===e.area?a("div",{staticClass:"holiday-tip",staticStyle:{background:"#ea4335"},on:{click:function(a){return a.stopPropagation(),t.deleteConnection(e)}}}):t._e()]),a("div",{staticStyle:{"font-size":"1rem",width:"100%","font-family":"Arial, Helvetica, sans-serif"}},[t._v(" "+t._s(e.area)+" : "+t._s(e.type)+" ")])],1)})):t._e()],2)])]}}])}),a("el-dialog",{attrs:{title:t.dialog.title,visible:t.dialog.visible,width:"500px","destroy-on-close":!0},on:{"update:visible":function(e){return t.$set(t.dialog,"visible",e)}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"100px",rules:t.rules}},[a("el-form-item",{attrs:{label:t.$t("vacation.date"),prop:"vacationDate"}},[a("el-date-picker",{attrs:{type:"daterange",placeholder:t.$t("vacation.datePlaceholder"),"value-format":"yyyy-MM-dd"},model:{value:t.addForm.vacationDate,callback:function(e){t.$set(t.addForm,"vacationDate",e)},expression:"addForm.vacationDate"}})],1),a("el-form-item",{attrs:{label:t.$t("vacation.region"),prop:"area"}},[a("el-select",{attrs:{placeholder:t.$t("vacation.regionPlaceholder")},model:{value:t.addForm.area,callback:function(e){t.$set(t.addForm,"area",e)},expression:"addForm.area"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:t.$t("vacation.name"),prop:"type"}},[a("el-input",{staticStyle:{width:"15rem"},attrs:{placeholder:t.$t("vacation.namePlaceholder")},model:{value:t.addForm.type,callback:function(e){t.$set(t.addForm,"type",e)},expression:"addForm.type"}})],1),a("el-form-item",[a("div",[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialog.visible=!1}}},[t._v(t._s(t.$t("clock.cancel")))]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addDate("addForm")}}},[t._v(t._s(t.$t("clock.confirm")))])],1)])])],1)],1),a("el-dialog",{attrs:{title:"Holidays",visible:t.visible1,width:"35%"},on:{"update:visible":function(e){t.visible1=e}}},[a("NationalHoliday",{attrs:{rem:t.rem,holidays:t.holidays}})],1)],1)},o=[],n=(a("14d9"),a("f636")),s=a("4a53"),l=a("e965"),r={name:"data-calendar",data(){return{base_api:"https://api.board.ifi-cloud.com",vocationDates:[],queryForm:{},conditionsFields:[],page:{pageSize:10,pageNum:1,total:1e3,queryCondition:{area:"",startTime:"",endTime:""}},dialog:{title:this.$t("vacation.addTitle"),visible:!1},addForm:{date:"",type:"",area:"",vacationDate:[]},options:[{value:"CN working day",label:"CN working day"},{value:"China",label:"China"},{value:"US",label:"US"},{value:"UK",label:"UK"}],form:[],rqi:[],rqineirong:{},allVocations:[],visible1:!1,holidays:[],rem:""}},created(){},computed:{rules(){return{area:[{required:!0,message:this.$t("vacation.regionPlaceholder"),trigger:"blur"}],type:[{required:!0,message:this.$t("vacation.namePlaceholder"),trigger:"blur"}]}}},components:{pageHeader:l["a"],NationalHoliday:s["a"]},methods:{openDialog(){this.dialog.title=this.$t("vacation.addTitle"),this.dialog.visible=!this.dialog.visible,this.addForm={date:"",type:"",area:"",vacationDate:[]},this.$nextTick(()=>{this.$refs.addForm.clearValidate()})},addDate(t){console.log(this.addForm,t,"shuju1");let e=JSON.parse(JSON.stringify(this.addForm));if(e.vacationDate[0]===e.vacationDate[1])e.vacationDate=e.vacationDate[0],this.addVacation(e);else{const t=new Date(e.vacationDate[0]),a=new Date(e.vacationDate[1]);while(t<=a){const a=t.toISOString().split("T")[0];e.vacationDate=a,this.addVacation(e),t.setDate(t.getDate()+1)}}},addVacation(t){this.$refs.addForm.validate(e=>{e&&Object(n["a"])(t).then(t=>{200==t.data.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.dialog.visible=!1,this.getAllVocations().then(()=>{this.rqi=[],this.rqineirong=[];for(var t=0;t<this.allVocations.length;t++)-1===this.rqi.indexOf(this.allVocations[t])&&(this.rqi.push(this.allVocations[t].vacationDate),void 0===this.rqineirong[this.allVocations[t].vacationDate]?(this.rqineirong[this.allVocations[t].vacationDate]=[],this.rqineirong[this.allVocations[t].vacationDate].push(this.allVocations[t])):this.rqineirong[this.allVocations[t].vacationDate].push(this.allVocations[t]))}),this.addForm={date:"",type:"",area:"",vacationDate:[]},this.getAreaVocations()):this.$message({type:"warning",message:"Add vacation fail.Maybe it already exists !"})})})},deleteConnection(t){this.$confirm(this.$t("award.deleteTips"),this.$t("award.tips"),{confirmButtonText:this.$t("award.confirm"),cancelButtonText:this.$t("award.cancel"),type:"warning"}).then(async()=>{const{data:e}=await Object(n["b"])(t.vacationTypeId,t.vacationDateId);200==e.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getAllVocations().then(()=>{this.rqi=[],this.rqineirong=[];for(var t=0;t<this.allVocations.length;t++)-1===this.rqi.indexOf(this.allVocations[t])&&(this.rqi.push(this.allVocations[t].vacationDate),void 0===this.rqineirong[this.allVocations[t].vacationDate]?(this.rqineirong[this.allVocations[t].vacationDate]=[],this.rqineirong[this.allVocations[t].vacationDate].push(this.allVocations[t])):this.rqineirong[this.allVocations[t].vacationDate].push(this.allVocations[t]))}),this.getAreaVocations()):this.$message({type:"warning",message:"delete record fail!"})}).catch(t=>{console.log(t)})},async getAllVocations(){const{data:t}=await Object(n["d"])();200==t.code&&(this.allVocations=t.data)},handleBianJi(t){this.openDialog(),this.addForm.vacationDate=[t,t]},async getAreaVocations(){const{data:t}=await Object(n["c"])();200==t.code?(console.log("areaVocations",t.data),this.holidays=t.data,this.holidays.push({key:"vocation",highlight:"pink",dates:new Date})):this.$message({type:"warning",message:t.msg})},getHeight(){console.log("获取宽高");var t=document.documentElement,e=t.clientWidth||document.body.clientWidth;const a=Math.ceil(e/115);this.rem=a+"px",console.log(a)}},mounted(){this.getAllVocations().then(()=>{for(var t=0;t<this.allVocations.length;t++)-1===this.rqi.indexOf(this.allVocations[t])&&(this.rqi.push(this.allVocations[t].vacationDate),void 0===this.rqineirong[this.allVocations[t].vacationDate]?(this.rqineirong[this.allVocations[t].vacationDate]=[],this.rqineirong[this.allVocations[t].vacationDate].push(this.allVocations[t])):this.rqineirong[this.allVocations[t].vacationDate].push(this.allVocations[t]))}),this.getAreaVocations(),this.getHeight()},watch:{}},c=r,d=(a("df10"),a("2877")),h=Object(d["a"])(c,i,o,!1,null,"07e0f865",null);e["default"]=h.exports},"9cc8":function(t,e,a){},df10:function(t,e,a){"use strict";a("eb95")},e965:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{background:"#fff",height:"100px",padding:"10px 0"}},[a("div",{staticClass:"title",staticStyle:{"font-size":"30px",padding:"10px"}},[t._v(t._s(t.title))]),a("div",{staticClass:"content",staticStyle:{"font-size":"15px",padding:"10px",color:"#888"}},[t._v(t._s(t.describe)+" ")])])},o=[],n={components:{},name:"pageHeader",props:{title:{type:String,default:null},describe:{type:String,default:null}},data(){return{}},computed:{},watch:{},methods:{},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},s=n,l=(a("3e54"),a("2877")),r=Object(l["a"])(s,i,o,!1,null,"32773f74",null);e["a"]=r.exports},eb95:function(t,e,a){},f636:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return r}));var i=a("751a"),o=a("4360");function n(){return Object(i["a"])({url:"/info_screen/vocation/areaVocations",method:"get"})}function s(){return Object(i["a"])({url:"/info_screen/vocation/vocationDates",method:"get",headers:{token:o["a"].getters.token}})}function l(t){return Object(i["a"])({url:"/info_screen/vocation/date/add",method:"post",data:t,headers:{token:o["a"].getters.token}})}function r(t,e){return Object(i["a"])({url:"/info_screen/vocation/delete/"+t+"/"+e,method:"delete",headers:{token:o["a"].getters.token}})}}}]);