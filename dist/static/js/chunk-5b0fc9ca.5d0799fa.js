(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b0fc9ca"],{"1e5c":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outer",style:{height:e.height},on:{mouseover:e.stopScroll,mouseleave:e.startScroll}},[a("div",{ref:"inner1"},[e._t("default")],2),a("div",{ref:"inner2"})])},s=[],n={name:"AutoScroll",props:{speed:{type:Number,default:90},height:{type:String,default:"0px"}},mounted(){this.getDomRef(),this.tryScroll()},updated(){this.tryScroll()},methods:{getDomRef(){this.outer=this.$el,this.inner1=this.$refs.inner1,this.inner2=this.$refs.inner2},tryScroll(){this.inner1.clientHeight>this.outer.clientHeight?(this.inner2.innerHTML=this.inner1.innerHTML,this.startScroll()):(this.inner2.innerHTML="",this.stopScroll())},startScroll(){this.autoScrollInterval||(this.autoScrollInterval=setInterval(()=>{this.outer.scrollTop>=this.inner1.offsetHeight?(this.outer.scrollTop=0,this.$emit("complete")):(this.outer.scrollTop+=1,this.outer.scrollTop===Math.ceil(this.inner1.offsetHeight/2)&&this.$emit("half"))},this.speed))},stopScroll(){clearInterval(this.autoScrollInterval),this.autoScrollInterval=null}}},r=n,o=(a("5b51"),a("2877")),l=Object(o["a"])(r,i,s,!1,null,"614ad447",null),c=l.exports;t["a"]=c},"2a00":function(e,t,a){},"3e54":function(e,t,a){"use strict";a("9cc8")},"54ad":function(e,t,a){"use strict";a("e402")},"5b51":function(e,t,a){"use strict";a("2a00")},"9cc8":function(e,t,a){},a4d8:function(e,t,a){"use strict";a.d(t,"g",(function(){return s})),a.d(t,"h",(function(){return n})),a.d(t,"i",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"j",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"f",(function(){return d})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return m})),a.d(t,"k",(function(){return f})),a.d(t,"l",(function(){return h})),a.d(t,"m",(function(){return b}));var i=a("751a");function s(e){return Object(i["a"])({url:"/info_screen/dd/key",data:e,method:"post"})}function n(e){return Object(i["a"])({url:"/info_screen/dd/show",data:e,method:"post"})}function r(e){return Object(i["a"])({url:"/info_screen/dd/urgent",data:e,method:"post"})}function o(){return Object(i["a"])({url:"/info_screen/dd/members",method:"get"})}function l(){return Object(i["a"])({url:"/info_screen/dd/show/list",method:"get"})}function c(){return Object(i["a"])({url:"/info_screen/dd/key/list",method:"get"})}function d(){return Object(i["a"])({url:"/info_screen/dd/notice/list",method:"get"})}function u(e){return Object(i["a"])({url:"/info_screen/dd/show/delete/"+e,method:"delete"})}function p(e){return Object(i["a"])({url:"/info_screen/dd/notice/delete/"+e,method:"delete"})}function m(e){return Object(i["a"])({url:"/info_screen/dd/key/delete/"+e,method:"delete"})}function f(e){return Object(i["a"])({url:"/info_screen/dd/key",method:"put",data:e})}function h(e){return Object(i["a"])({url:"/info_screen/dd/show",method:"put",data:e})}function b(e){return Object(i["a"])({url:"/info_screen/dd/urgent",method:"put",data:e})}},b130:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"keyNew"},[a("div",{staticClass:"key-news"},[a("div",{staticClass:"news-box"},[a("div",{staticClass:"news-tip"},[e._v(e._s(e.$t("int.unInfo")))]),a("autoscroll",{attrs:{height:e.height,speed:30}},[0===e.keyNews.length?a("div",{staticStyle:{padding:"5rem","font-size":"3rem"}},[e._v(" "+e._s(e.$t("int.noneInfo"))+" ")]):e._e(),e._l(e.keyNews,(function(t){return a("div",{key:t.keynewId,staticClass:"news-content"},[a("el-row",{staticClass:"news-item"},[a("el-col",{staticStyle:{"margin-right":"1rem"},attrs:{span:4}},[0===t.memberId||null===t.memberId?a("div",{staticClass:"news-publish-box"},[a("el-avatar",{staticStyle:{width:"5rem",height:"5rem"},attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),a("div",{staticStyle:{"font-size":"1rem","margin-top":"6px",color:"rgba(255, 255, 255,0.8)","word-break":"break-all","font-weight":"600"}},[e._v(" "+e._s(t.publisher))])],1):a("div",{staticClass:"news-publish-box"},[a("el-avatar",{staticStyle:{width:"5rem",height:"5rem"},attrs:{src:e.base_api+t.avatar}}),a("div",{staticStyle:{"font-size":"1rem","margin-top":"6px",color:"rgba(255, 255, 255,0.8)","word-break":"break-all","font-weight":"600"}},[e._v(" "+e._s(t.memberName))])],1)]),a("el-col",{attrs:{span:20}},[a("div",{staticStyle:{"line-height":"1.5em","word-break":"keep-all","text-align":"justify","text-justify":"distribute-all-lines","font-size":"1.4rem","font-weight":"600"}},[e._v(" "+e._s(t.message))]),a("div",{staticStyle:{"font-size":"1rem","margin-top":"10px",color:"rgba(255, 255, 255,0.5)","text-align":"end"}},[e._v(" "+e._s(t.gmtCreate))]),a("div",{staticStyle:{"font-size":"1rem","margin-top":"3px",color:"rgba(255, 255, 255,0.5)","text-align":"end"}},[e._v(" "+e._s(t.title))])])],1)],1)}))],2)],1)])])},s=[],n=a("fe71"),r=a("1e5c"),o={components:{autoscroll:r["a"]},name:"KeyNew",props:{height:{type:String,default:"15.5rem"},rem:{type:String,default:""},keyNews:{type:Array,default:function(){return[]}}},data(){return{data:[],base_api:"https://api.board.ifi-cloud.com"}},computed:{},watch:{},methods:{async getKeyNews(){const{data:e}=await Object(n["e"])();200==e.code&&(this.data=e.data)}},created(){},mounted(){this.getKeyNews()},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},l=o,c=(a("c67e"),a("2877")),d=Object(c["a"])(l,i,s,!1,null,"be1b899e",null);t["a"]=d.exports},c67e:function(e,t,a){"use strict";a("e468")},e402:function(e,t,a){},e468:function(e,t,a){},e81e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"keynew-container",attrs:{id:"index"}},[a("pageHeader",{attrs:{title:e.$t("int.pageTitle"),describe:e.$t("int.pageDesc")}}),a("div",{staticClass:"new-create",staticStyle:{"margin-left":"1rem"}},[a("el-button",{staticClass:"create-button",attrs:{type:"primary",size:"mini"},on:{click:e.openDialog}},[a("i",{staticClass:"el-icon-plus"}),e._v(" "+e._s(e.$t("int.add")))]),a("el-button",{staticStyle:{"margin-left":"0"},attrs:{type:"warning",size:"mini"},on:{click:function(t){e.visible1=!0,e.getUnexpiredNews()}}},[a("i",{staticClass:"el-icon-view"}),e._v(" "+e._s(e.$t("int.view"))+" ")])],1),a("div",{staticClass:"table"},[a("el-table",{staticClass:"table-content",staticStyle:{width:"100%"},attrs:{data:e.keynews,border:!0,stripe:""}},[a("el-table-column",{attrs:{prop:"keynewId",label:"id",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"title",label:e.$t("int.title"),width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.keynewId==e.currentUpdateId?a("el-input",{model:{value:e.updateForm.title,callback:function(t){e.$set(e.updateForm,"title",t)},expression:"updateForm.title"}}):a("div",{staticStyle:{"word-break":"keep-all"}},[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{prop:"message",label:e.$t("int.message"),width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.keynewId==e.currentUpdateId?a("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.updateForm.message,callback:function(t){e.$set(e.updateForm,"message",t)},expression:"updateForm.message"}}):a("div",{staticStyle:{"word-break":"keep-all"}},[e._v(" "+e._s(t.row.message)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"publisher",label:e.$t("int.publisher"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.memberId||null===t.row.memberId?a("div",[t.row.showId==e.currentUpdateId?a("el-input",{model:{value:e.updateShow.publisher,callback:function(t){e.$set(e.updateShow,"publisher",t)},expression:"updateShow.publisher"}}):a("div",[a("div",[a("el-avatar",{staticClass:"avatar",attrs:{size:42,src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),a("div",[e._v(e._s(t.row.publisher))])],1)])],1):a("div",[a("div",[a("el-avatar",{staticClass:"avatar",attrs:{size:42,src:e.base_api+t.row.avatar}}),a("div",[e._v(e._s(t.row.memberName))])],1)])]}}])}),a("el-table-column",{attrs:{prop:"gmtModified",label:e.$t("int.lastModified"),align:"center"}}),a("el-table-column",{attrs:{prop:"isExpire",label:e.$t("int.state"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66"},on:{change:function(a){return e.updateIsExpire(t.row.keynewId)}},model:{value:t.row.isExpire,callback:function(a){e.$set(t.row,"isExpire",a)},expression:"scope.row.isExpire"}})]}}])}),a("el-table-column",{attrs:{label:e.$t("int.expiration"),width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.keynewId==e.currentUpdateId?a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:e.$t("int.expirationPlaceholder")},model:{value:e.updateForm.expireTime,callback:function(t){e.$set(e.updateForm,"expireTime",t)},expression:"updateForm.expireTime"}}):a("span",[e._v(e._s(t.row.expireTime))])]}}])}),a("el-table-column",{attrs:{label:e.$t("int.operation"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.keynewId==e.currentUpdateId?a("div",{staticStyle:{display:"flex","justify-content":"center",cursor:"pointer"}},[a("div",{staticStyle:{color:"#409eff"},on:{click:function(a){return e.confirmUpdate(t.row)}}},[a("span",[e._v(e._s(e.$t("int.confirm")))])]),a("div",{staticStyle:{color:"#409eff","margin-left":"10px"},on:{click:function(t){return e.cancelUpdate()}}},[a("span",[e._v(e._s(e.$t("int.cancel")))])])]):a("div",{staticStyle:{display:"flex","justify-content":"center",cursor:"pointer"}},[a("div",{staticStyle:{color:"#409eff"},on:{click:function(a){return e.update(t.row)}}},[a("span",[e._v(e._s(e.$t("int.update")))])]),a("div",{staticStyle:{color:"#409eff","margin-left":"10px"},on:{click:function(a){return e.deleteById(t.row.keynewId)}}},[a("span",[e._v(e._s(e.$t("int.delete")))])])])]}}])})],1)],1),e.tableVisable?a("div",{staticClass:"table"},[a("el-card",{staticClass:"table-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("Int. news")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"primary"},on:{click:e.submitToBatch}},[e._v("Confirm Batch Operations ")])],1),a("el-table",{staticClass:"table-content",attrs:{data:e.excelData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"font-size":"28px",color:"blue","font-family":"'Times New Roman', Times, serif",padding:"20px 50px"}},[e._v(" content ")]),a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},e._l(t.row.content,(function(t,i){return a("el-form-item",{key:i,attrs:{label:i+":"}},[a("span",[e._v(e._s(t))])])})),1)]}}],null,!1,1419671540)}),a("el-table-column",{attrs:{prop:"title",label:"title",width:"300",align:"center"}}),a("el-table-column",{attrs:{prop:"expireTime",label:"expiration datetime",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"gmtCreate",label:"gmtCreate",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"gmtModified",label:"gmtModified",width:"180",align:"center"}})],1)],1)],1):e._e(),a("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.visible,width:"35%","destroy-on-close":!0},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[a("el-form",{ref:"formData",attrs:{model:e.formData,"label-width":"150px",rules:e.rules}},[a("el-form-item",{attrs:{label:e.$t("int.title"),prop:"title"}},[a("el-input",{attrs:{type:"text",placeholder:e.$t("int.titlePlaceholder")},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),a("el-form-item",{attrs:{label:e.$t("int.message"),prop:"message"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:e.$t("int.messagePlaceholder")},model:{value:e.formData.message,callback:function(t){e.$set(e.formData,"message",t)},expression:"formData.message"}})],1),a("el-form-item",{attrs:{label:e.$t("int.customPublisher")}},[a("el-switch",{model:{value:e.flag,callback:function(t){e.flag=t},expression:"flag"}}),a("span",{staticStyle:{color:"red","font-size":"0.8rem","margin-left":"0.2rem"}},[e._v(e._s(e.$t("int.notes")))])],1),e.flag?a("el-form-item",{attrs:{label:e.$t("int.customPublisher"),prop:"publisher"}},[a("el-input",{attrs:{placeholder:e.$t("int.customPublisher")},model:{value:e.formData.publisher,callback:function(t){e.$set(e.formData,"publisher",t)},expression:"formData.publisher"}})],1):a("el-form-item",{attrs:{label:e.$t("int.optionalPublisher"),prop:"memberId"}},[a("el-select",{attrs:{placeholder:e.$t("int.optionalPublisher"),clearable:!0},model:{value:e.formData.memberId,callback:function(t){e.$set(e.formData,"memberId",t)},expression:"formData.memberId"}},e._l(e.members,(function(t){return a("el-option",{key:t.id,attrs:{label:t.memberName,value:t.id}},[a("div",[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"15px"}},[e._v(e._s(t.memberName))]),a("el-avatar",{staticStyle:{width:"35px",height:"35px",float:"right"},attrs:{src:e.base_api+t.avatar}})],1)])})),1)],1),a("el-form-item",{attrs:{label:e.$t("int.expiration"),prop:"expireTime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:e.$t("int.expirationPlaceholder"),"value-format":"yyyy-MM-ddTHH:mm:ss"},model:{value:e.formData.expireTime,callback:function(t){e.$set(e.formData,"expireTime",t)},expression:"formData.expireTime"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialog.visible=!1}}},[e._v(e._s(e.$t("int.cancel")))]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.submit("formData")}}},[e._v(e._s(e.$t("int.confirm")))])],1)])],1)],1),a("el-dialog",{attrs:{title:e.$t("int.viewInfo"),visible:e.visible1,width:"35%"},on:{"update:visible":function(t){e.visible1=t}}},[a("KeyNews",{staticStyle:{width:"100%"},attrs:{keyNews:e.unexpiredNews}})],1)],1)},s=[],n=a("4360"),r=a("fe71"),o=a("b130"),l=a("a4d8"),c=a("e965"),d={name:"keynew-index",data(){return{base_api:"https://api.board.ifi-cloud.com",keynews:[],formData:{title:"",message:"",expireTime:"",publisher:"",memberId:""},excelData:[],tableVisable:!1,headers:{token:n["a"].getters.token},currentUpdateId:0,updateForm:{expireTime:"",expireTimeString:"",message:"",title:""},dialog:{title:"Add Keynew",visible:!1},memebers:[],flag:!0,visible1:!1,unexpiredNews:[]}},created(){},computed:{rules(){return{title:[{required:!0,message:this.$t("int.titlePlaceholder"),trigger:"blur"}],message:[{required:!0,message:this.$t("int.messagePlaceholder"),trigger:"blur"}],expireTime:[{required:!0,message:this.$t("int.expirationPlaceholder"),trigger:"blur"}]}}},components:{pageHeader:c["a"],KeyNews:o["a"]},methods:{openDialog(){this.dialog.title=this.$t("int.addDialogTitle"),this.dialog.visible=!this.dialog.visible;for(let e in this.formData)this.formData[e]=""},async getKeynews(){const{data:e}=await Object(r["c"])();200==e.code?this.keynews=e.data:this.$message({type:"warning",message:e.msg})},submit(e){this.$refs[e].validate(e=>{if(!e)return!1;Object(r["d"])(this.formData).then(e=>{if(200==e.data.code){this.$message({type:"success",message:this.$t("clock.operationOK")});for(let e in this.formData)this.formData[e]="";this.dialog.visible=!1,this.getKeynews()}})})},handleSuccess(e){console.log("get excelTable"),200==e.code?(this.excelData=e.data,this.tableVisable=!0):this.$message({type:"warning",message:e.msg})},async submitToBatch(){console.log(this.excelData),console.log(this.excelData);const{data:e}=await Object(r["a"])(this.excelData);200==e.code?this.$message({type:"success",message:this.$t("clock.operationOK")}):this.$message({type:"warning",message:e.msg})},deleteById(e){this.$confirm(this.$t("int.deleteTips"),this.$t("int.tips"),{confirmButtonText:this.$t("int.confirm"),cancelButtonText:this.$t("int.cancel"),type:"warning"}).then(async()=>{const{data:t}=await Object(r["b"])(e);200==t.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getKeynews()):this.$message({type:"warning",message:t.msg})}).catch(e=>{this.$message({type:"info",message:this.$t("clock.cancelTooltip")})})},async updateIsExpire(e){const{data:t}=await Object(r["f"])(e);200==t.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getKeynews()):this.$message({type:"warning",message:t.msg})},async updateKeyNew1(){const{data:e}=await Object(r["g"])(this.updateForm);200==e.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getKeynews(),this.currentUpdateId=0,this.updateForm={}):this.$message({type:"warning",message:e.msg})},update(e){this.currentUpdateId=e.keynewId,this.updateForm.title=e.title,this.updateForm.message=e.message,this.updateForm.expireTime=e.expireTime,this.updateForm.isExpire=e.isExpire,this.updateForm.keynewId=e.keynewId},confirmUpdate(){this.updateForm.expireTimeString=this.updateForm.expireTime,this.updateForm.expireTime=null,this.updateKeyNew1()},cancelUpdate(){this.currentUpdateId=0,this.updateForm={},this.getKeynews(),this.$message({type:"info",message:this.$t("clock.cancelTooltip")})},addContentItem(){this.$set(this.updateForm.content,this.contentKey,this.contentValue)},async getMembers(){const{data:e}=await Object(l["e"])();200==e.code?this.members=e.data:this.$message({type:"warning",message:e.msg})},async getUnexpiredNews(){const{data:e}=await Object(r["e"])();200==e.code?this.unexpiredNews=e.data:this.$message({type:"warning",message:e.msg})}},mounted(){this.getKeynews(),this.getMembers()},watch:{}},u=d,p=(a("54ad"),a("2877")),m=Object(p["a"])(u,i,s,!1,null,"dbd1c9ce",null);t["default"]=m.exports},e965:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",staticStyle:{background:"#fff",height:"100px",padding:"10px 0"}},[a("div",{staticClass:"title",staticStyle:{"font-size":"30px",padding:"10px"}},[e._v(e._s(e.title))]),a("div",{staticClass:"content",staticStyle:{"font-size":"15px",padding:"10px",color:"#888"}},[e._v(e._s(e.describe)+" ")])])},s=[],n={components:{},name:"pageHeader",props:{title:{type:String,default:null},describe:{type:String,default:null}},data(){return{}},computed:{},watch:{},methods:{},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},r=n,o=(a("3e54"),a("2877")),l=Object(o["a"])(r,i,s,!1,null,"32773f74",null);t["a"]=l.exports},fe71:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"b",(function(){return u}));var i=a("751a"),s=a("4360");function n(){return Object(i["a"])({url:"/info_screen/keynew/list",method:"get",headers:{token:s["a"].getters.token}})}function r(e){return Object(i["a"])({url:"/info_screen/keynew/insert",method:"post",data:e,headers:{token:s["a"].getters.token}})}function o(e){return Object(i["a"])({url:"/info_screen/keynew/batchAdd",method:"post",data:e,headers:{token:s["a"].getters.token}})}function l(){return Object(i["a"])({url:"/info_screen/keynew/unexpiredNews",method:"get"})}function c(e){return Object(i["a"])({url:"/info_screen/keynew/updateIsExpire/"+e,method:"get",headers:{token:s["a"].getters.token}})}function d(e){return Object(i["a"])({url:"/info_screen/keynew/updateKeyNew",method:"post",headers:{token:s["a"].getters.token},data:e})}function u(e){return Object(i["a"])({url:"/info_screen/keynew/delete/"+e,method:"delete",headers:{token:s["a"].getters.token}})}}}]);