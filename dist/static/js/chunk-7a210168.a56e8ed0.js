(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a210168"],{"3e54":function(e,t,a){"use strict";a("9cc8")},"640c":function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return o}));a("4360");var n=a("751a");function i(){return Object(n["a"])({url:"/info_screen/profitAndLossModel/getAllMachineType",method:"post"})}function l(e){return Object(n["a"])({url:"/info_screen/profitAndLossModel/addMachineType",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/info_screen/profitAndLossModel/updateMachineType",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/info_screen/profitAndLossModel/deleteMachineType",method:"DELETE",data:e})}},8313:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-container"},[a("pageHeader",{attrs:{title:e.$t("finance.profit.title"),describe:e.$t("finance.profit.describe")}}),a("div",{staticClass:"new-create"},[a("el-button",{staticClass:"create-button",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.openDialog(1)}}},[a("i",{staticClass:"el-icon-plus"}),e._v(e._s(e.$t("finance.add")))]),a("el-button",{staticStyle:{"margin-left":"15px"},attrs:{size:"mini",type:"success"},on:{click:function(t){return e.copyUrl()}}},[a("i",{staticClass:"el-icon-view"}),e._v(e._s(e.$t("finance.viewKanban")))]),a("el-button",{staticStyle:{"margin-left":"15px"},attrs:{size:"mini"},on:{click:e.getMachine}},[a("i",{staticClass:"el-icon-refresh"}),e._v(e._s(e.$t("finance.reload")))])],1),a("el-table",{attrs:{data:e.machineData,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:e.$t("finance.profit.index"),width:"50",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.machineName"),prop:"machineName",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.bomCost"),prop:"bomCost",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.promotionExpense"),prop:"promotionExpense",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.brandExpense"),prop:"brandExpense",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.freight"),prop:"freight",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.wastage"),prop:"wastage",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.websitePlatformCost"),prop:"websitePlatformCost",width:"110",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.packingExpense"),prop:"packingExpense",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.taxes"),prop:"taxes",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.salesCommission"),prop:"salesCommission",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.other"),prop:"other",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.developmentExpense"),prop:"developmentExpense",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.sellingExpense"),prop:"sellingExpense",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.managerExpense"),prop:"managerExpense",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.profit.otherExpense"),prop:"otherExpense",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("finance.operation"),align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex","justify-content":"center",cursor:"pointer"}},[a("div",{staticStyle:{color:"#409eff"},on:{click:function(a){return e.updateMachine(t.row)}}},[a("span",[e._v(e._s(e.$t("finance.edit")))])]),a("div",{staticStyle:{color:"#409eff","margin-left":"10px"},on:{click:function(a){return e.deleteMachine(t.row.id)}}},[a("span",[e._v(e._s(e.$t("finance.delete")))])])])]}}])})],1),a("el-dialog",{staticClass:"dialog",attrs:{title:e.dialog.title,visible:e.dialog.visible,width:"30%","close-on-click-modal":!1,top:"1vh"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[a("el-form",{attrs:{model:e.form,"label-width":"120px"}},[e._l(e.addMachineFormData,(function(t,n){return a("el-form-item",{key:t,staticClass:"form-item",attrs:{label:t.label}},[a("el-input",{attrs:{clearable:"",size:"small",disabled:"ID"==t.label},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})],1)})),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v(e._s(e.$t("menu.confirm")))])],1)],2)],1)],1)},i=[],l=(a("14d9"),a("e965")),s=a("640c"),o={components:{pageHeader:l["a"]},data(){return{machineData:[],dialog:{title:"",visible:!1},update:!1,addMachineFormData:[{label:"机型名称",value:"",name:"machineName"},{label:"BOM成本",value:"",name:"bomCost"},{label:"推广费",value:"",name:"promotionExpense"},{label:"品牌费",value:"",name:"brandExpense"},{label:"运费",value:"",name:"freight"},{label:"损耗",value:"",name:"wastage"},{label:"网站平台费用",value:"",name:"websitePlatformCost"},{label:"包装费",value:"",name:"packingExpense"},{label:"税金",value:"",name:"taxes"},{label:"销售提成",value:"",name:"salesCommission"},{label:"其他",value:"",name:"other"},{label:"研发成本",value:"",name:"developmentExpense"},{label:"销售费用",value:"",name:"sellingExpense"},{label:"管理费用",value:"",name:"managerExpense"},{label:"其他费用",value:"",name:"otherExpense"}]}},mounted(){this.getMachine()},methods:{async getMachine(){const{data:e}=await Object(s["c"])();200==e.code&&(this.machineData=e.data)},updateMachine(e){this.openDialog(2);let t=this.addMachineFormData.findIndex(e=>"id"==e.name);-1==t&&this.addMachineFormData.push({label:"ID",value:"",name:"id"}),this.addMachineFormData.forEach(t=>{e[t.name]&&(t.value=e[t.name])}),this.update=!0},openDialog(e){if(1===e){this.dialog.title="新增机型",this.update=!1;let e=this.addMachineFormData.findIndex(e=>"id"==e.name);-1!==e&&this.addMachineFormData.splice(e,1),this.addMachineFormData.forEach(e=>e.value=""),console.log(this.addMachineFormData)}else 2===e&&(this.dialog.title="更新机型");this.dialog.visible=!0},async submit(){let e={};this.addMachineFormData.forEach(t=>{e[t.name]=t.value});const t=this.addMachineFormData.some((e,t)=>0!==t||isNaN(e.value)||isNaN(parseFloat(e.value))?!(0===t||"number"===typeof Number(e.value)&&!isNaN(e.value))&&(console.log(e,typeof Number(e.value),2),!0):(console.log(e,!isNaN(e.value)&&!isNaN(parseFloat(e.value)),1),!0));if(this.addMachineFormData.find(e=>""==e.value))this.$message({type:"warning",message:"数据不能为空"});else if(t)this.$message({type:"warning",message:"格式错误：机型名称数据格式为文本，其余数据格式为数字"});else if(this.update){const{data:t}=await Object(s["d"])(e);200==t.code&&(this.dialog.visible=!1,this.$message({type:"success",message:"update successfully!"}),this.addMachineFormData.forEach(e=>e.value=""),this.getMachine())}else{const{data:t}=await Object(s["a"])(e);200==t.code&&(this.dialog.visible=!1,this.$message({type:"success",message:"add successfully!"}),this.addMachineFormData.forEach(e=>e.value=""),this.getMachine())}},async deleteMachine(e){const t=await this.$confirm("是否确定删除此数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});if(t){const{data:t}=await Object(s["b"])([e]);200==t.code&&(this.$message({type:"success",message:"delete successfully!"}),this.getMachine())}},toPath(e){"——"!=e&&this.$router.push({path:e})},copyUrl(){const e=window.location.href.substring(0,window.location.href.lastIndexOf("#")+1),t=e+"/info_screen/screen/profit";setTimeout(()=>{window.open(t)},300)}}},c=o,r=(a("f1b9"),a("2877")),d=Object(r["a"])(c,n,i,!1,null,"13f08bcb",null);t["default"]=d.exports},"9cc8":function(e,t,a){},c59d:function(e,t,a){},e965:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",staticStyle:{background:"#fff",height:"100px",padding:"10px 0"}},[a("div",{staticClass:"title",staticStyle:{"font-size":"30px",padding:"10px"}},[e._v(e._s(e.title))]),a("div",{staticClass:"content",staticStyle:{"font-size":"15px",padding:"10px",color:"#888"}},[e._v(e._s(e.describe)+" ")])])},i=[],l={components:{},name:"pageHeader",props:{title:{type:String,default:null},describe:{type:String,default:null}},data(){return{}},computed:{},watch:{},methods:{},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},s=l,o=(a("3e54"),a("2877")),c=Object(o["a"])(s,n,i,!1,null,"32773f74",null);t["a"]=c.exports},f1b9:function(e,t,a){"use strict";a("c59d")}}]);