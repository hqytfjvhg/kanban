(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18272b51"],{"330e":function(e,t,a){"use strict";a.r(t);var l,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ticket-container",attrs:{id:"ticket"}},[a("el-form",{staticClass:"form-box",staticStyle:{display:"flex",width:"100%"},attrs:{inline:!0,model:e.form,size:"mini"}},[a("el-form-item",[a("el-input",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"请输入product"},model:{value:e.page.queryCondition.product,callback:function(t){e.$set(e.page.queryCondition,"product",t)},expression:"page.queryCondition.product"}})],1),a("el-form-item",{attrs:{label:"area:"}},[a("el-checkbox-group",{on:{change:e.handleCheckedColumnChangeSales},model:{value:e.areaCheckeds,callback:function(t){e.areaCheckeds=t},expression:"areaCheckeds"}},e._l(e.areaOptions,(function(t){return a("el-checkbox",{key:t.label,style:"Row"==t.label?"margin-right: 10px;":"",attrs:{label:t.label}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),a("el-form-item",{attrs:{label:"state:"}},[a("el-checkbox-group",{on:{change:e.handleCheckedColumnChangeSales},model:{value:e.stateCheckeds,callback:function(t){e.stateCheckeds=t},expression:"stateCheckeds"}},e._l(e.typeOptions,(function(t){return a("el-checkbox",{key:t.label,style:"Add"==t.label?"margin-right: 10px;":"",attrs:{label:t.label}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),a("el-form-item",[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"datetime",placeholder:"选择startTime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.page.queryCondition.startTime,callback:function(t){e.$set(e.page.queryCondition,"startTime",t)},expression:"page.queryCondition.startTime"}})],1),a("el-form-item",[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"datetime",placeholder:"选择endTime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.page.queryCondition.endTime,callback:function(t){e.$set(e.page.queryCondition,"endTime",t)},expression:"page.queryCondition.endTime"}})],1),a("el-form-item",{staticStyle:{"margin-right":"10px"}},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.submitToQuery}},[e._v("查询")])],1)],1),a("div",{staticClass:"new-create"},[a("el-button",{staticClass:"create-button",attrs:{type:"success",size:"mini"},on:{click:function(t){return e.openDialog(1)}}},[e._v("新增")]),a("el-upload",{attrs:{action:e.base_api+"/info_screen/ticket/excel/handler",multiple:"",limit:1,"on-success":e.handleSuccess,"file-list":e.fileList,headers:e.headers}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("批量新增Ticket (excel)")])],1)],1),a("el-table",{attrs:{data:e.records,stripe:"",border:""}},[a("el-table-column",{attrs:{align:"center",label:"ID",type:"index",width:"60"}}),a("el-table-column",{attrs:{prop:"product",label:"product",align:"center"}}),a("el-table-column",{attrs:{prop:"area",label:"Area",align:"center"}}),a("el-table-column",{attrs:{prop:"num",label:"Num",align:"center"}}),a("el-table-column",{attrs:{prop:"state",label:"type",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.state?"Add":"Resolve"))])]}}])}),a("el-table-column",{attrs:{prop:"gmtHandler",label:"handler_date",align:"center"}}),a("el-table-column",{attrs:{label:"operation",align:"center",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(a){return e.openDialog(t)}}},[e._v("update")]),a("el-button",{attrs:{type:"danger",round:"",size:"mini"},on:{click:function(a){return e.delectById(t.row.ticketId)}}},[e._v("delete")])]}}])})],1),a("el-pagination",{staticStyle:{float:"right","margin-bottom":"20px"},attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.page.pageNum,total:e.page.total,"page-size":e.page.pageSize},on:{"update:currentPage":function(t){return e.$set(e.page,"pageNum",t)},"update:current-page":function(t){return e.$set(e.page,"pageNum",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e.tableVisable?a("div",{staticClass:"table"},[a("el-card",{staticClass:"table-card",staticStyle:{background:"#fff"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"20px"}},[e._v("Excel表数据")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"primary"},on:{click:e.submitToBatch}},[e._v("确认批量操作 ")])],1),a("el-table",{staticClass:"table-content",staticStyle:{width:"100%",padding:"0 20px"},attrs:{data:e.excelData,border:!0}},[a("el-table-column",{attrs:{type:"index",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"product",label:"产品",width:"300",align:"center"}}),a("el-table-column",{attrs:{prop:"area",label:"地区",width:"300",align:"center"}}),a("el-table-column",{attrs:{prop:"statu",label:"类型",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.statu?"新增":"解决"))])]}}],null,!1,1558374092)}),a("el-table-column",{attrs:{prop:"num",label:"票数",width:"200",align:"center"}}),a("el-table-column",{attrs:{prop:"gmtHandler",label:"处理时间",align:"center"}})],1)],1)],1):e._e(),a("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.visible,width:"35%"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[a("el-form",{attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"product:"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{placeholder:"请输入内容","fetch-suggestions":e.querySearch},model:{value:e.form.product,callback:function(t){e.$set(e.form,"product",t)},expression:"form.product"}})],1),a("el-form-item",{attrs:{label:"area:"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}},e._l(e.areaOptions,(function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})})),1)],1),a("el-form-item",{attrs:{label:"Type:"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})})),1)],1),a("el-form-item",{attrs:{label:"Num:"}},[a("el-input",{model:{value:e.form.num,callback:function(t){e.$set(e.form,"num",t)},expression:"form.num"}})],1),a("el-form-item",{attrs:{label:"handler_date:"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form.gmtHandler,callback:function(t){e.$set(e.form,"gmtHandler",t)},expression:"form.gmtHandler"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("confirm")])],1)],1)],1)],1)},r=[],o=(a("14d9"),a("59ce")),i=a("4360"),s={name:"data-ticket",data(){return{areaCheckeds:[],stateCheckeds:[],base_api:"https://api.board.ifi-cloud.com",records:[],conditionsFields:[],fileList:[],areaOptions:[{label:"Row"},{label:"China"}],typeOptions:[{label:"Add"},{label:"Resolve"}],form:{},statu:!0,products:[],excelData:[],tableVisable:!1,headers:{token:i["a"].getters.token},dialog:{title:"新增",visible:!1,type:1},page:{pageSize:10,pageNum:1,total:1e3,queryCondition:{product:"",area:"",state:"",startTime:"",endTime:""}}}},methods:{handleCheckedColumnChangeSales(){},openDialog(e){this.dialog.type=e,1==e?(this.form={},this.dialog.visible=!0,this.dialog.title="Add Ticket"):(this.dialog.visible=!0,this.dialog.title="Resolve Ticket",this.form=e.row,this.form.type=e.row.state?"Add":"Resolve")},submitToQuery(){l=this,l.page.queryCondition.area=1==l.areaCheckeds.length?l.areaCheckeds[0]:"",l.page.queryCondition.state=1==l.stateCheckeds.length?"Add"==l.stateCheckeds[0]?1:0:"",l.page.pageNum=1,l.getRecords()},async getRecords(){const{data:e}=await Object(o["k"])(this.page);200==e.code&&(this.records=e.data.data,this.page.total=e.data.total)},toPath(e){this.$router.push({path:e})},async submit(){if(console.log("form-data",this.form),1==this.dialog.type){const{data:e}=await Object(o["a"])(this.form);console.log(e),200==e.code?(this.$message({type:"success",message:"成功新增"}),this.form={},this.dialog.visible=!1,setTimeout(()=>{this.getRecords()},100)):this.$message({type:"error",message:e.msg})}else{const{data:e}=await Object(o["j"])(this.form);200==e.code&&(this.$message({type:"success",message:"成功处理"}),this.form={},this.dialog.visible=!1,setTimeout(()=>{this.getRecords()},100))}},async getProducts(){const{data:e}=await Object(o["d"])();console.log(e),200==e.code&&(this.products=e.data)},querySearch(e,t){console.log(e),t(this.products)},handleSuccess(e){200==e.code&&(this.excelData=e.data,this.tableVisable=!0)},async submitToBatch(){const{data:e}=await Object(o["b"])(this.excelData);console.log(e)},handleCurrentChange(e){this.page.pageNum=e,this.getRecords()},handleSizeChange(e){this.page.pageSize=e,this.getRecords()},async delectById(e){this.$confirm("确认删除这条记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const{data:t}=await Object(o["c"])(e);200==t.code?(this.$message({type:"success",message:"Delete ticket successfully!"}),this.getRecords()):this.$message({type:"warning",message:"Delete ticket fail!"})}).catch(()=>{})}},mounted(){this.getRecords(),this.getProducts()}},c=s,d=(a("f44b"),a("2877")),u=Object(d["a"])(c,n,r,!1,null,"a09331b2",null);t["default"]=u.exports},"59ce":function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"l",(function(){return o})),a.d(t,"f",(function(){return i})),a.d(t,"i",(function(){return s})),a.d(t,"m",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return p})),a.d(t,"j",(function(){return m})),a.d(t,"d",(function(){return h})),a.d(t,"b",(function(){return g})),a.d(t,"k",(function(){return f})),a.d(t,"h",(function(){return b}));var l=a("751a"),n=a("4360");function r(){return Object(l["a"])({url:"/ifi/vote/getUUID",method:"get"})}function o(e,t,a){return Object(l["a"])({url:"/ifi/vote/set/"+e+"/"+t+"/"+a,method:"get"})}function i(){return Object(l["a"])({url:"/ifi/vote/get",method:"get"})}function s(e){return Object(l["a"])({url:"/ifi/vote/reset",method:"get",data:e})}function c(e){return Object(l["a"])({url:"/ifi/vote/add",method:"post",data:e})}function d(){return Object(l["a"])({url:"/ifi/vote/result",method:"get"})}function u(e){return console.log(e),Object(l["a"])({url:"/info_screen/ticket/add",method:"post",data:e,headers:{token:n["a"].getters.token}})}function p(e){return Object(l["a"])({url:"/info_screen/ticket/delete/"+e,method:"delete",headers:{token:n["a"].getters.token}})}function m(e){return Object(l["a"])({url:"/info_screen/ticket/resolve",method:"post",data:e,headers:{token:n["a"].getters.token}})}function h(){return Object(l["a"])({url:"/info_screen/ticket/products",method:"get",headers:{token:n["a"].getters.token}})}function g(e){return Object(l["a"])({url:"/info_screen/ticket/adds",method:"post",data:e,headers:{token:n["a"].getters.token}})}function f(e){return Object(l["a"])({url:"/info_screen/ticket/list/paged",method:"post",data:e,headers:{token:n["a"].getters.token}})}function b(e,t,a,r){return Object(l["a"])({url:"/info_screen/ticket/sum/"+e+"/"+t+"/"+a+"/"+r,method:"get",headers:{token:n["a"].getters.token}})}},"9dda":function(e,t,a){},f44b:function(e,t,a){"use strict";a("9dda")}}]);