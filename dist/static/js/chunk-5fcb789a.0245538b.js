(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fcb789a"],{"0b80":function(t,e,n){},6711:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"w",(function(){return s})),n.d(e,"y",(function(){return i})),n.d(e,"v",(function(){return c})),n.d(e,"z",(function(){return a})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return d})),n.d(e,"x",(function(){return l})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return m})),n.d(e,"h",(function(){return g})),n.d(e,"k",(function(){return b})),n.d(e,"g",(function(){return f})),n.d(e,"m",(function(){return p})),n.d(e,"p",(function(){return k})),n.d(e,"t",(function(){return O})),n.d(e,"q",(function(){return w})),n.d(e,"j",(function(){return j})),n.d(e,"s",(function(){return T})),n.d(e,"n",(function(){return v})),n.d(e,"o",(function(){return y})),n.d(e,"i",(function(){return _})),n.d(e,"u",(function(){return C})),n.d(e,"f",(function(){return H})),n.d(e,"A",(function(){return S})),n.d(e,"r",(function(){return x})),n.d(e,"C",(function(){return D})),n.d(e,"l",(function(){return U})),n.d(e,"B",(function(){return E}));var o=n("751a");function r(){return Object(o["a"])({url:"/info_screen/board/finance/all",method:"get"})}function s(t){return Object(o["a"])({url:"/info_screen/board/finance/outcomes/"+t,method:"get"})}function i(t){return Object(o["a"])({url:"/info_screen/board/finance/saleMonth/"+t,method:"get"})}function c(t){return Object(o["a"])({url:"/info_screen/board/finance/incomes/"+t,method:"get"})}function a(){return Object(o["a"])({url:"/info_screen/board/finance/sale/rate",method:"get"})}function u(t){return Object(o["a"])({url:"/info_screen/board/dept/all/"+t,method:"get"})}function d(t){return Object(o["a"])({url:"/info_screen/board/dept/month/"+t,method:"get"})}function l(t){return Object(o["a"])({url:"/info_screen/board/purchase/"+t,method:"get"})}function h(t){return Object(o["a"])({url:"/info_screen/board/cash/"+t,method:"get"})}function m(t){return Object(o["a"])({url:"/info_screen/board/balance/"+t,method:"get"})}function g(t){return Object(o["a"])({url:"/info_screen/board/clock/"+t,method:"get"})}function b(t){return Object(o["a"])({url:"/info_screen/board/member/"+t,method:"get"})}function f(t){return Object(o["a"])({url:"/info_screen/board/award/true/"+t,method:"get"})}function p(t){return Object(o["a"])({url:"/info_screen/board/unexpired/notices/"+t,method:"get"})}function k(){return Object(o["a"])({url:"/info_screen/board/productTesting/list",method:"get"})}function O(){return Object(o["a"])({url:"/info_screen/board/software/list",method:"get"})}function w(){return Object(o["a"])({url:"/info_screen/board/project/list",method:"get"})}function j(){return Object(o["a"])({url:"/info_screen/board/eol/list",method:"get"})}function T(){return Object(o["a"])({url:"/info_screen/board/return/list",method:"get"})}function v(){return Object(o["a"])({url:"/info_screen/board/monthOverstock/list",method:"get"})}function y(){return Object(o["a"])({url:"/info_screen/board/productStage/list",method:"get"})}function _(){return Object(o["a"])({url:"/info_screen/board/complaint/list",method:"get"})}function C(){return Object(o["a"])({url:"/info_screen/board/complaintUnsolved/list",method:"get"})}function H(){return Object(o["a"])({url:"/info_screen/board/avgDays",method:"get"})}function S(t){return Object(o["a"])({url:"/info_screen/board/avgDays/"+t,method:"get"})}function x(){return Object(o["a"])({url:"/info_screen/board/returnDays",method:"get"})}function D(t){return Object(o["a"])({url:"/info_screen/board/returnDays/"+t,method:"get"})}function U(){return Object(o["a"])({url:"/info_screen/board/monthOverstock/type",method:"get"})}function E(t){return Object(o["a"])({url:"/info_screen/board/monthOverstock/type/"+t,method:"get"})}},"74b6":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"StsScreen"},[n("div",{staticClass:"title flex-center",style:"height:"+t.titleHeight,attrs:{id:"title"}},[t._v("Tech support")]),n("div",{staticClass:"first-part",staticStyle:{margin:"0 0.8rem"}},[n("el-row",t._l(t.clocks,(function(e){return n("el-col",{key:e.clockId,attrs:{xs:12,sm:12,lg:{span:"4-8"}}},[n("div",{staticClass:"clock-group",style:"height:"+t.clockHeight,attrs:{id:"clock-group"}},[n("CrayonClock",{attrs:{timeZone:Number(e.clockTimezone),country:e.clockArea,timeFormat:e.timeFormat}})],1)])})),1)],1),n("div",{staticClass:"separate",attrs:{id:"separate"}}),n("div",{staticClass:"members",staticStyle:{margin:"0 0.8rem"}},[n("el-row",t._l(t.members,(function(e){return n("el-col",{key:e.id,attrs:{xs:12,sm:12,lg:{span:"4-8"}}},[n("CardComponent",{attrs:{height:t.membersHeight,rem:t.rem,members:e}})],1)})),1)],1),n("div",{staticClass:"separate",attrs:{id:"separate"}}),n("div",{staticClass:"second-part",staticStyle:{margin:"0rem 1.2rem"}},[n("el-row",[n("el-col",{attrs:{xs:12,sm:12,lg:7}},[n("AvgTicket",{staticStyle:{"padding-right":"0.5rem"},attrs:{height:t.secondHeight,rem:t.rem,complaints:t.complaints}})],1),n("el-col",{attrs:{xs:12,sm:12,lg:8}},[n("ProductReturn",{staticStyle:{"padding-right":"0.5rem"},attrs:{height:t.secondHeight,rem:t.rem,returns:t.returns,returnDays:t.returnDays}})],1),n("el-col",{attrs:{xs:12,sm:12,lg:9}},[n("SoftwareStage",{attrs:{height:t.secondHeight,rem:t.rem,SoftwareStages:t.softwares}})],1)],1)],1),n("div",{staticClass:"separate",attrs:{id:"separate"}}),n("div",{staticClass:"third-part",staticStyle:{margin:"0rem 1.2rem"}},[n("el-row",[n("el-col",{attrs:{xs:12,sm:12,lg:4}},[n("UnsolvedTicket",{staticStyle:{"padding-right":"0.5rem"},attrs:{height:t.thirdHeight,rem:t.rem,unsolvedComplaints:t.unsolvedComplaints}})],1),n("el-col",{attrs:{xs:12,sm:12,lg:12}},[n("ProductTesting",{attrs:{rem:t.rem,height:t.thirdHeight,data:t.productTestings}})],1),n("el-col",{attrs:{xs:12,sm:12,lg:8}},[n("UrgentNotice",{staticStyle:{"margin-left":"0.5rem"},attrs:{boxHeight:t.thirdHeight,height:t.urgentNoticeHeight,notices:t.notices}})],1)],1)],1)])},r=[],s=n("1585"),i=n("c80b"),c=n("cb53"),a=n("2614"),u=n("715e"),d=n("743c"),l=n("fcc9"),h=n("698e"),m=n("ad4d"),g=n("6711"),b={components:{CrayonClock:s["a"],AreaClock:i["a"],AvgTicket:a["a"],UnsolvedTicket:u["a"],ProductReturn:d["a"],SoftwareStage:l["a"],ProductTesting:h["a"],UrgentNotice:m["a"],CardComponent:c["a"]},name:"StsScreen",data(){return{loading:null,websock:null,lockReconnect:!1,timeout:6e4,timeoutObj:null,serverTimeoutObj:null,timeoutnum:null,topic:"sts",rem:"",titleHeight:"",clockHeight:"",membersHeight:"",secondHeight:"",thirdHeight:"",urgentNoticeHeight:"",clocks:[],members:[],notices:[],productTestings:[],softwares:[],returns:[],complaints:[],unsolvedComplaints:[],returnDays:10}},computed:{},watch:{},methods:{getHeight(){console.log("获取宽高");var t=document.documentElement,e=t.clientWidth||document.body.clientWidth;const n=Math.ceil(e/115);document.documentElement.style.fontSize=n+"px",this.rem=n+"px",console.log(n);var o=window.innerHeight;const r=Math.round(.06*o),s=Math.round(.08*o),i=Math.round(.06*o),c=Math.round(.365*o),a=Math.round(.35*o);this.titleHeight=r+"px",this.clockHeight=s+"px",this.membersHeight=i+"px",this.secondHeight=c+"px",this.thirdHeight=a+"px",this.urgentNoticeHeight=.9*a+"px",console.log("titleHeight",this.titleHeight),console.log("clockHeight",this.clockHeight),console.log("membersHeight",this.membersHeight),console.log("secondHeight",this.secondHeight),console.log("thirdHeight",this.thirdHeight)},async getClocks(){const{data:t}=await Object(g["h"])(3);200==t.code&&(this.clocks=t.data)},async getMembers(){const{data:t}=await Object(g["k"])(3);console.log(t.data),200==t.code&&(this.members=t.data)},async getNotices(){const{data:t}=await Object(g["m"])(3);200==t.code&&(this.notices=t.data)},async getProductTestings(){const{data:t}=await Object(g["p"])();console.log("getProductTesting",t),200==t.code&&(this.productTestings=t.data)},async getSoftwares(){const{data:t}=await Object(g["t"])();200==t.code&&(this.softwares=t.data)},async getReturns(){const{data:t}=await Object(g["s"])();console.log(t),200==t.code&&(this.returns=t.data)},async getComplaints(){const{data:t}=await Object(g["i"])();console.log("getComplaints",t),200==t.code&&(this.complaints=t.data)},async getUnsolvedComplaints(){const{data:t}=await Object(g["u"])();console.log("getUnsolvedComplaints",t),200==t.code&&(this.unsolvedComplaints=t.data)},async getReturnDays(){const{data:t}=await Object(g["r"])();200==t.code&&(this.returnDays=t.data)},initWebSocket:function(){console.log("初始化websocket");var t="wss://api.board.ifi-cloud.com/websocket/"+this.topic;this.websock=new WebSocket(t),this.websock.onopen=this.websocketOnOpen,this.websock.onerror=this.websocketOnError,this.websock.onmessage=this.websocketonmessage,this.websock.onclose=this.websocketclose},websocketOnOpen:function(){this.start()},websocketOnError:function(t){console.log("websocket 连接错误"+t),this.initWebSocket()},websocketSend:function(t){this.websock.send(t)},websocketonmessage:function(t){this.reset(),"UPDATE_TEAM"==t.data&&this.getMembers(),"UPDATE_NOTICES"==t.data&&this.getNotices(),"UPDATE_PRODUCT_TESTING"==t.data&&this.getProductTestings(),"UPDATE_SOFTWARE"==t.data&&this.getSoftwares(),"UPDATE_RETURN"==t.data&&(this.getReturns(),this.getReturnDays()),"UPDATE_COMPLAINT"==t.data&&this.getComplaints(),"UPDATE_COMPLAINT_UNSOLVED"==t.data&&this.getUnsolvedComplaints(),"UPDATE_CLOCK"==t.data&&this.getClocks()},websocketclose:function(){},reconnet(){var t=this;t.lockReconnect||(t.lockReconnect=!0,t.timeoutnum&&clearTimeout(t.timeoutnum),t.timeoutnum=setTimeout(()=>{t.initWebSocket(),t.lockReconnect=!1},5e3))},reset(){var t=this;clearTimeout(t.timeoutObj),clearTimeout(t.serverTimeoutObj),t.start()},start(){var t=this;t.timeoutObj&&clearTimeout(t.timeoutObj),t.serverTimeoutObj&&clearTimeout(t.serverTimeoutObj),t.timeoutObj=setTimeout(()=>{if(1===t.websock.readyState){const e={isHeart:!0,topic:this.topic,context:"心跳中"};t.websock.send(JSON.stringify(e))}else t.reconnet();t.serverTimeoutObj=setTimeout(()=>{t.websock.close()},t.timeout)},t.timeout)}},created(){},mounted(){const t=this;window.onresize=()=>(()=>{t.getHeight()})(),this.initWebSocket(),this.getClocks(),this.getMembers(),this.getNotices(),this.getProductTestings(),this.getSoftwares(),this.getReturns(),this.getComplaints(),this.getUnsolvedComplaints(),this.getReturnDays(),setTimeout(()=>{this.getHeight()},1e3)},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){this.websocketclose()},activated(){}},f=b,p=(n("d22a"),n("2877")),k=Object(p["a"])(f,o,r,!1,null,"3b36eac7",null);e["default"]=k.exports},d22a:function(t,e,n){"use strict";n("0b80")}}]);