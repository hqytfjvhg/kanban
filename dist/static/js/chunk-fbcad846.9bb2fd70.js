(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fbcad846"],{"0e7e":function(t,e,a){"use strict";a("996f")},"2c04":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"show-container",attrs:{id:"index"}},[a("pageHeader",{attrs:{title:t.$t("product.productTitle"),describe:t.$t("product.productDesc")}}),a("div",{staticClass:"new-create",staticStyle:{"margin-left":"1rem"}},[a("el-button",{staticClass:"create-button",attrs:{type:"primary",size:"mini"},on:{click:t.openDialog}},[a("i",{staticClass:"el-icon-plus"}),t._v(t._s(t.$t("int.add")))])],1),a("div",{staticClass:"table"},[a("el-table",{staticClass:"table-content",staticStyle:{width:"100%"},attrs:{data:t.shows,border:!0,stripe:""}},[a("el-table-column",{attrs:{label:t.$t("clock.index"),width:"80",align:"center",type:"index"}}),a("el-table-column",{attrs:{prop:"name",label:t.$t("product.name"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id==t.currentUpdateId?a("el-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}):a("div",[t._v(t._s(e.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"productDate",label:t.$t("product.productDate"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["ch"==t.$i18n.locale?a("div",[t._v(t._s(e.row.productDate))]):a("div",[t._v(t._s(t.formatDate(e.row.productDate)))])]}}])}),a("el-table-column",{attrs:{prop:"content",label:t.$t("product.content"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id==t.currentUpdateId?a("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}}):a("div",[t._v(t._s(e.row.content))])]}}])}),a("el-table-column",{attrs:{label:t.$t("ext.operation"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id==t.currentUpdateId?a("div",{staticStyle:{display:"flex","justify-content":"center",cursor:"pointer"}},[a("div",{staticStyle:{color:"#409eff"},on:{click:function(a){return t.confirmUpdate(e.row)}}},[a("span",[t._v(t._s(t.$t("ext.confirm")))])]),a("div",{staticStyle:{color:"#409eff","margin-left":"10px"},on:{click:t.cancelUpdate}},[a("span",[t._v(t._s(t.$t("ext.cancel")))])])]):a("div",{staticStyle:{display:"flex","justify-content":"center",cursor:"pointer"}},[a("div",{staticStyle:{color:"#409eff"},on:{click:function(a){return t.update(e.row)}}},[a("span",[t._v(t._s(t.$t("ext.update")))])]),a("div",{staticStyle:{color:"#409eff","margin-left":"10px"},on:{click:function(a){return t.deleteById(e.row.id)}}},[a("span",[t._v(t._s(t.$t("ext.delete")))])])])]}}])})],1)],1),a("el-dialog",{attrs:{title:t.dialog.title,visible:t.dialog.visible,width:"500px","destroy-on-close":!0},on:{"update:visible":function(e){return t.$set(t.dialog,"visible",e)}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,"label-width":"120px",rules:t.rules}},[a("el-form-item",{attrs:{label:t.$t("product.name"),prop:"name"}},[a("el-input",{attrs:{type:"text",placeholder:t.$t("product.nameDesc")},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:t.$t("product.content"),prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:7,placeholder:t.$t("product.contentDesc")},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1),a("el-form-item",{attrs:{label:t.$t("product.productDate"),prop:"productDate"}},[a("el-date-picker",{attrs:{type:"daterange",placeholder:t.$t("vacation.datePlaceholder"),"value-format":"yyyy-MM-dd",format:"yyyy-MM-dd"},model:{value:t.formData.productDate,callback:function(e){t.$set(t.formData,"productDate",e)},expression:"formData.productDate"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialog.visible=!1}}},[t._v(t._s(t.$t("int.cancel")))]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.submit("formData")}}},[t._v(t._s(t.$t("ext.confirm")))])],1)])],1)],1)],1)},r=[],s=a("c4c8"),i=a("e965"),n={data(){return{shows:[],formData:{name:"",content:"",productDate:[],id:"",company:!0},updateShow:{},currentUpdateId:0,dialog:{title:"",visible:!1}}},created(){},computed:{rules(){var t=function(t,e,a){a()};return{name:[{required:!0,message:this.$t("product.nameDesc"),trigger:"blur"}],content:[{required:!0,message:this.$t("product.contentDesc"),trigger:"blur"}],productDate:[{required:!0,message:this.$t("vacation.datePlaceholder"),trigger:"blur"},{validator:t,trigger:"blur"}]}}},components:{pageHeader:i["a"]},methods:{formatDate(t){if("string"===typeof t&&t.includes("~")){const e=t.split(" ~ ").map(t=>t.trim());return e.map(t=>{const[e,a,o]=t.split("-");return`${o.padStart(2,"0")}/${a.padStart(2,"0")}/${e}`}).join(" ~ ")}{const[e,a,o]=t.split("-");return`${o.padStart(2,"0")}/${a.padStart(2,"0")}/${e}`}},openDialog(){this.dialog.title=this.$t("product.addDialogTitle"),this.dialog.visible=!this.dialog.visible,this.formData={name:"",content:"",productDate:[],id:"",company:!0},this.$nextTick(()=>{this.$refs.formData.clearValidate()})},async getShows(){const{data:t}=await Object(s["c"])("true");200==t.code?this.shows=t.data:this.$message({type:"warning",message:t.msg})},update(t){this.$nextTick(()=>{this.$refs.formData.clearValidate()}),this.dialog.visible=!0,this.dialog.title=this.$t("product.updateNews"),this.formData=JSON.parse(JSON.stringify(t)),this.formData.productDate.includes(" ~ ")?this.formData.productDate=this.formData.productDate.split(" ~ "):this.formData.productDate=[this.formData.productDate,this.formData.productDate],console.log(this.formData,"shuju")},formatDateTime(t){let e=new Date(t);var a=e.getFullYear(),o=e.getMonth()+1;o=o<10?"0"+o:o;var r=e.getDate();r=r<10?"0"+r:r;e.getHours();var s=e.getMinutes();return s=s<10?"0"+s:s,a+"-"+o+"-"+r},submit(t){console.log(this.formData,"shuju"),this.formData.productDate[0]===this.formData.productDate[1]?this.formData.productDate=this.formData.productDate[0]:this.formData.productDate=this.formData.productDate.join(" ~ "),this.$refs[t].validate(t=>{if(!t)return!1;this.formData.company=!0,this.dialog.title==this.$t("product.addDialogTitle")?Object(s["a"])(this.formData).then(t=>{200==t.data.code&&(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.formData={name:"",content:"",productDate:[],id:"",company:!0},this.dialog.visible=!1,this.getShows())}):Object(s["d"])(this.formData).then(t=>{200==t.data.code?(this.$message({type:"success",message:"update notice successfully!"}),this.getShows(),this.dialog.visible=!1,this.formData={name:"",content:"",productDate:[],id:"",company:!0}):this.$message({type:"warning",message:t.msg})})})},deleteById(t){this.$confirm(this.$t("award.deleteTips"),this.$t("ext.tips"),{confirmButtonText:this.$t("ext.confirm"),cancelButtonText:this.$t("ext.cancel"),type:"warning"}).then(async()=>{const{data:e}=await Object(s["b"])(t);200==e.code?(this.$message({type:"success",message:this.$t("clock.operationOK")}),this.getShows()):this.$message({type:"warning",message:e.msg})}).catch(t=>{})},async confirmUpdate(t){if(""==this.formData.content)return void this.$message({type:"warning",message:this.$t("product.warningTips")});if(""==this.formData.name)return void this.$message({type:"warning",message:this.$t("product.warningTips")});if(""==this.formData.productDate)return void this.$message({type:"warning",message:this.$t("product.warningTips")});const{data:e}=await Object(s["d"])(this.formData);if(200==e.code){this.$message({type:"success",message:"update notice successfully!"}),this.getShows(),this.currentUpdateId=0;for(let t in this.formData)this.formData[t]=""}else this.$message({type:"warning",message:e.msg})},cancelUpdate(){this.currentUpdateId=0;for(let t in this.formData)this.formData[t]="";this.getShows()}},mounted(){this.getShows()},watch:{}},c=n,l=(a("0e7e"),a("2877")),d=Object(l["a"])(c,o,r,!1,null,"4916b2ce",null);e["default"]=d.exports},"3e54":function(t,e,a){"use strict";a("9cc8")},"996f":function(t,e,a){},"9cc8":function(t,e,a){},c4c8:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return c}));var o=a("751a"),r=a("4360");function s(t){return Object(o["a"])({url:"/info_screen/product/addProduct",method:"post",headers:{token:r["a"].getters.token},data:t})}function i(t){return Object(o["a"])({url:"/info_screen/product/updateProduct",method:"post",headers:{token:r["a"].getters.token},data:t})}function n(t){return Object(o["a"])({url:"/info_screen/product/deleteProduct?id="+t,method:"delete",headers:{token:r["a"].getters.token}})}function c(t){return Object(o["a"])({url:"/info_screen/product/getAllProduct?company="+t,method:"get",headers:{token:r["a"].getters.token}})}},e965:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",staticStyle:{background:"#fff",height:"100px",padding:"10px 0"}},[a("div",{staticClass:"title",staticStyle:{"font-size":"30px",padding:"10px"}},[t._v(t._s(t.title))]),a("div",{staticClass:"content",staticStyle:{"font-size":"15px",padding:"10px",color:"#888"}},[t._v(t._s(t.describe)+" ")])])},r=[],s={components:{},name:"pageHeader",props:{title:{type:String,default:null},describe:{type:String,default:null}},data(){return{}},computed:{},watch:{},methods:{},created(){},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){}},i=s,n=(a("3e54"),a("2877")),c=Object(n["a"])(i,o,r,!1,null,"32773f74",null);e["a"]=c.exports}}]);